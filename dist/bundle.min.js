window.annexSearch=window.annexSearch||{},window.annexSearch.DependencyLoader=function(){let e=[],t=0,n=function(e,n){return++t,r(e),!0===s(e)&&(n.apply(window.annexSearch.DependencyLoader),!0)},r=function(e){if(t>1e4){let n="Could not complete an attempt: [";throw n+=e.join(", ")+"]",window.annexSearch&&window.annexSearch.LoggingUtils&&window.annexSearch.LoggingUtils.error(n),Error(n)}},s=function(e){let t=0,n=e.length;for(;t<n;++t)if(!1===i(e[t]))return!1;return!0},i=function(e){let t=e.split("."),n=window;for(var r of t){if(void 0===n[r])return!1;n=n[r]}return!0};return{load:function(n){n=n||function(){};let r;for(;e.length>0;)!1===(r=e.shift()).apply(window.annexSearch.DependencyLoader)&&e.push(r);n(t)},push:function(t,r){"string"==typeof t&&(t=[t]);let s=[t,r],i=function(){return n.apply(window.annexSearch.DependencyLoader,s)};return e.push(i),!0}}}(),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.AnnexSearch=window.annexSearch.AnnexSearch||class{static #a=null;static #b=!1;static #c=[];static #d="v0.1.0-dev";static #e(){return window.annexSearch.CacheUtils.setup(),window.annexSearch.DataUtils.setup(),window.annexSearch.ElementUtils.setup(),window.annexSearch.ErrorUtils.setup(),window.annexSearch.FunctionUtils.setup(),window.annexSearch.InteractionUtils.setup(),window.annexSearch.KeyboardShortcutUtils.setup(),window.annexSearch.LoggingUtils.setup(),window.annexSearch.StringUtils.setup(),!0}static clearActive(){return this.#a=null,!0}static getActive(){return this.#a}static getDevMode(){return this.#b}static getRegistered(){return this.#c}static getShowing(){let e=this.#c,t=[];for(let n of e)!0===n.showing()&&t.push(n);return t}static getVersion(){return this.#d}static register(e){return this.#c.push(e),!0}static setActive(e){return this.#a=e,!0}static setDevMode(e){return this.#b=e,!0}static setup(){return this.#e(),window.customElements.define("annex-search-widget",window.annexSearch.AnnexSearchWidgetWebComponent),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.Base=window.annexSearch.Base||class{#f={};constructor(){}error(){let e=window.annexSearch.LoggingUtils,t=window.annexSearch.LoggingUtils.error.apply(e,arguments);return t}get(e){return this.#f[e]||void 0}getHelper(e){return this.getWebComponent().getHelper(e)}getView(e){let t=(this.get("views")||{})[e]||void 0;if(void 0!==t)return t;if("root"===e)return this.getWebComponent().getView("root");let n=e.split(".");for(let r of(t=this.getWebComponent().getView("root"),n))"root"!==r&&(t=t.getView(r));return t}getWebComponent(){return this._$element?.getRootNode()?.host||window.annexSearch.AnnexSearch.getActive()}hideWebComponent(){return this.getWebComponent().hide(),!0}set(e,t){return this.#f[e]=t,!0}setStateKey(e){return this.getView("root").setStateKey(e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ConfigHelper=window.annexSearch.ConfigHelper||class extends window.annexSearch.BaseView{#f={$container:null,callbacks:{result:{click:function(e,t,n){},focus:function(e,t,n){console.log("result.focus",e,t,n)}},results:{empty:function(e){},error:function(e,t){},idle:function(e){},loaded:function(e,t){}},root:{hide:function(e){},show:function(e){},toggle:function(e){}}},cluster:{apiKey:null,collectionName:null,hostname:null,presetName:null},copy:{empty:{message:"No results found..."},error:{message:"Something went wrong..."},idle:{message:"Start typing to begin your search..."},placeholder:"Search...",statusBar:{message:"Instantly search through 10,000+ results"}},debug:!0,keyboardShortcut:"⌘k",highlightTagName:"MARK",layout:"modal",name:null,paths:{css:["https://local.annexsearch.com/ts/css",],templates:"https://local.annexsearch.com/ts/templates"},schema:"webResource-v0.1.0",searchOptions:{highlight_full_fields:null,highlight_affix_num_tokens:null,snippet_threshold:null},searchRequestMethod:"lifo",showOverlay:!0,templates:{}};constructor(){super()}#g(e){let t=e.match(/<script\b[^>]*>[\s\S]*?<\/script>/gi);for(let n of t){let r=n.match(/data-template-id=["']([^"']+)["']/),s=r?r[1]:null;null!==s&&(this.#f.templates[s]=n)}return window.annexSearch.CacheUtils.set("templates",this.#f.templates),!0}#h(i,a){let o=window.annexSearch.ErrorUtils.getMessage("stylesheets.failedLoading");return window.annexSearch.LoggingUtils.error(o,a),i(),!0}#i(l){return window.annexSearch.ElementUtils.waitForAnimation().then(l),!0}#j(h){let u=h.shadow,c=this.#h.bind(this),d=this.#i.bind(this);return Promise.all(Array.from(new Set(this.get("paths").css)).map(function(e){return new Promise(function(t,n){let r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onload=t,r.onerror=c.bind(null,n),u.appendChild(r)})})).then(function(){return new Promise(function(e){d(e)})})}#k(){let p=this.#g.bind(this);return fetch(this.#f.paths.templates).then(function(e){return e.text()}).then(p)}get(e){if(void 0===e)return this.#f;let t=this.#f[e];if(void 0!==t)return t;let n=e.split(".");if(1===n.length){let r=window.annexSearch.ErrorUtils.getMessage("configHelper.get.key.invalid",e);this.error(r);return}for(let s of(t=this.#f,n))if(void 0===(t=t[s])){let i=window.annexSearch.ErrorUtils.getMessage("configHelper.get.key.invalid",e);this.error(i);return}return t}loadStylesheets(e){return this.#j(e)}loadTemplates(){let e=window.annexSearch.CacheUtils.get("templates");return void 0===e?this.#k():(this.#f.templates=e,console.log("oh"),!0)}set(e,t){if(void 0===e){let n=window.annexSearch.ErrorUtils.getMessage("configHelper.set.key.undefined");return this.error(n),!1}if(void 0===t){let r=window.annexSearch.ErrorUtils.getMessage("configHelper.set.value.undefined");return this.error(r),!1}if(void 0===this.get(e))return!1;let s=this.#f,i=this.#f[e],a=e;if(void 0===i){let o=e.split(".");for(a of(i=this.#f,o))s=i,i=i[a]}return s[a]=t,!0}setData(e){return this.#f=window.annexSearch.DataUtils.deepMerge(this.#f,e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.TypesenseHelper=window.annexSearch.TypesenseHelper||class extends window.annexSearch.BaseView{#l=null;#m=[];constructor(){super()}#n(){if(null===this.#l)return!1;let e=this.#l;this.#l=null,e.abort();let t=this.#m.indexOf(e);return -1!==t&&(this.#m.splice(t,1),!0)}#o(n){let r=n.getOptions();if(null===r.q){let s=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.null");return n.setError("option",s),!1}if(void 0===r.q){let i=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.undefined");return n.setError("option",i),!1}if(""===r.q.trim()){let a=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.empty");return n.setError("option",a),!1}let o=n.getSearchOptions();if(o.preset)return!0;if(null===o.query_by){let l=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.searchOptions.query_by.null");return n.setError("searchOptions",l),!1}if(void 0===o.query_by){let h=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.searchOptions.query_by.undefined");return n.setError("searchOptions",h),!1}return!0}getHighlightEndTag(){return"</"+this.getHelper("config").get("highlightTagName").toLowerCase()+">"}getHighlightStartTag(){return"<"+this.getHelper("config").get("highlightTagName").toLowerCase()+">"}replaceHightlightTags(e){let t=this.getHighlightStartTag(),n=this.getHighlightEndTag(),r=t.replace("<","&lt;").replace(">","&gt;"),s=n.replace("<","&lt;").replace(">","&gt;");return e=(e=e.replaceAll(r,t)).replaceAll(s,n)}search(e,t={}){this.#n();let n=new window.annexSearch.TypesenseSearchRequest(e);return(n.setOptions(t),!1===this.#o(n))?window.annexSearch.FunctionUtils.getEmptyPromise(n):(this.#l=n,this.#m.push(n),n.fetch())}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.TypesenseCollectionRequest=window.annexSearch.TypesenseCollectionRequest||class extends window.annexSearch.Base{constructor(e){super()}fetch(){let e={host:"your-typesense-host.com",port:443,protocol:"https",apiKey:"your-api-key"},t=`${e.protocol}://${e.host}:${e.port}`;async function n(n){try{let r=`${t}/collections/${n}`,s=await fetch(r,{method:"GET",headers:{"X-TYPESENSE-API-KEY":e.apiKey,"Content-Type":"application/json"}});if(!s.ok)throw Error(`HTTP error! status: ${s.status} - ${s.statusText}`);let i=await s.json();return i}catch(a){throw console.error("Error fetching collection details:",a),a}}async function r(){try{var e;let t=await n("products");console.log("Collection Details:",t),e=t,console.log(`
=== Collection: ${e.name} ===`),console.log(`Documents: ${e.num_documents}`),console.log(`Created: ${new Date(1e3*e.created_at).toLocaleDateString()}`),e.default_sorting_field&&console.log(`Default Sort: ${e.default_sorting_field}`),console.log("\nFields:"),e.fields.forEach(e=>{let t=e.optional?" (optional)":" (required)",n=e.facet?" [facetable]":"",r=!1!==e.index?" [indexed]":" [not indexed]";console.log(`  - ${e.name}: ${e.type}${t}${n}${r}`)})}catch(r){console.error("Failed to fetch collection:",r)}}function s(n){return new Promise((r,s)=>{let i=new XMLHttpRequest,a=`${t}/collections/${n}`;i.open("GET",a,!0),i.setRequestHeader("X-TYPESENSE-API-KEY",e.apiKey),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState){if(i.status>=200&&i.status<300)try{let e=JSON.parse(i.responseText);r(e)}catch(t){s(Error("Failed to parse response JSON"))}else s(Error(`HTTP error! status: ${i.status}`))}},i.onerror=function(){s(Error("Network error occurred"))},i.send()})}return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.TypesenseSearchRequest=window.annexSearch.TypesenseSearchRequest||class extends window.annexSearch.Base{#p=null;#q=!1;#r=null;#s={page:1,per_page:10};#t=null;#u=null;constructor(e){super(),this.#t=e,this.#s.q=e,this.#s.highlight_end_tag=this.getHelper("typesense").getHighlightEndTag(),this.#s.highlight_start_tag=this.getHelper("typesense").getHighlightStartTag()}#v(e,t){let n=this.#w.bind(this),r=this.#x.bind(this);return window.fetch(e,t).then(n).catch(r)}#y(){return{hostname:this.getHelper("config").get("cluster.hostname"),protocol:"https",apiKey:this.getHelper("config").get("cluster.apiKey"),collectionName:this.getHelper("config").get("cluster.collectionName"),presetName:this.getHelper("config").get("cluster.presetName")}}#z(){let s=this.#y();return s.protocol+"://"+s.hostname}#A(){return{"X-TYPESENSE-API-KEY":this.#y().apiKey,"Content-Type":"application/json"}}#B(){let i=new AbortController,a=this.#A(),o={method:"GET",signal:i.signal,headers:a};return this.#p=i,o}#C(){let l=this.getSearchOptions(),h=new URLSearchParams(l);for(let[u,c]of h.entries())c||h.delete(u);return h}#D(){let d=this.#z(),p=this.#y(),g=this.#C(),f=new URLSearchParams(g).toString();return d+"/collections/"+p.collectionName+"/documents/search?"+f}#x(S){let m=S.name,y=S.message;return this.setError(m,y),this}#E(x){this.#u=x;let w=x?.message;if(void 0!==w)throw this.setError("typesenseSearchRequestResponse",w),Error();return!1===x.ok&&alert("hmmm"),this}#w($){let v=this.#E.bind(this);return $.json().then(v)}abort(){if(!0===this.#q)return!1;this.#q=!0;let e=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.abort");return this.setError("abort",e),this.#p.abort(),!0}fetch(){let e=this.#D(),t=this.#B();return this.#v(e,t)}getError(){return this.#r}getOptions(){return this.#s}getQuery(){return this.#t}getResponse(){return this.#u}getSearchOptions(){let e=this.#y(),t=Object.assign({},this.#s);for(let n in t.preset=e.presetName||null,t)null===t[n]&&delete t[n];return t}setError(e,t){return null===this.#r&&(this.#r={},this.#r.key=e,this.#r.message=t,!0)}setOptions(e){return this.#s=Object.assign({},this.#s,this.getHelper("config").get("searchOptions"),e),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.CacheUtils=window.annexSearch.CacheUtils||class{static #f={};static get(e){let t=this.#f[e];if(void 0!==t)return t}static set(e,t){return this.#f[e]=t,!0}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.DataUtils=window.annexSearch.DataUtils||class{static deepMerge(e,t){let n={...e};for(let r in t)t.hasOwnProperty(r)&&(t[r]&&"object"==typeof t[r]&&!Array.isArray(t[r])?n[r]&&"object"==typeof n[r]&&!Array.isArray(n[r])?n[r]=this.deepMerge(n[r],t[r]):n[r]=this.deepMerge({},t[r]):n[r]=t[r]);return n}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.DebuggingUtils=window.annexSearch.DebuggingUtils||class{static log(){if(!1===this.getHelper("config").get("debug"))return!1;let e=window.annexSearch.LoggingUtils.debug.apply(window.annexSearch.LoggingUtils,arguments);return e}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.ElementUtils=window.annexSearch.ElementUtils||class{static #F(e,t){let n=t.getHelper("config").get("templates")[e],r=new DOMParser,s=r.parseFromString(n,"text/html"),i;return n=s.querySelector("script[type]").textContent.trim(),i=(s=r.parseFromString(n,"text/html")).body.firstElementChild}static getEscapedHTML(e){return e.replace(/&(?!(?:[a-z\d]+|#\d+|#x[a-f\d]+);)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static getValueFromPath(e,t){let n=e.split("."),r=t;for(let s of n){if(r&&"object"==typeof r&&s in r){r=r[s];continue}return null}return null==r||""===(r=r.trim())?null:r=String(r)}static renderTemplate(e,t,n=null){n=n||t.getRootNode().host;let r=this.#F(e,n);t.appendChild(r);let s=r.getAttribute("data-view-name"),i=new window.annexSearch[s](r);return r.data=r.data||{},r.data.view=i,i.render(),i}static renderTemplateVariables(e,t){return e=e.replace(/\{\{([^}]+)\}\}/g,function(e,n){if(!0===n.includes("||")){let r=n.split("||").map(function(e){return e.trim()});for(let s of r){let i=window.annexSearch.ElementUtils.getValueFromPath(s,t);if(null!==i)return window.annexSearch.ElementUtils.getEscapedHTML(i)}return""}n=n.trim();let a=window.annexSearch.ElementUtils.getValueFromPath(n,t);return null===a?"":a=window.annexSearch.ElementUtils.getEscapedHTML(a)})}static waitForAnimation(){return new Promise(function(e,t){window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e()})})})}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.ErrorUtils=window.annexSearch.ErrorUtils||class{static #G={"configHelper.get.key.invalid":"Invalid {key} value passed to {base.configHelper.get}; found {%0}","configHelper.set.key.undefined":"Invalid {key} value passed to {base.configHelper.set}; found {undefined}","configHelper.set.value.undefined":"Invalid {value} value passed to {base.configHelper.set}; found {undefined}","interactionUtils.zeroRegistered":"No registered $annexSearchWidget elements found","interactionUtils.multipleRegistered":"Multiple registered $annexSearchWidget elements found. Unable to determine which $element is the target.","loggingUtils.fetchFailed.tip":"Tip: Double check that {config.cluster.hostname} is defined and correct","loggingUtils.typesenseFailed.tip":"Tip: Double check that {config.cluster.apiKey} and {config.cluster.collectionName} are defined and correct","stylesheets.failedLoading":"Could not load stylesheets","typesenseSearchRequest.abort":"Abort method called against {window.annexSearch.TypesenseSearchRequest}","typesenseHelper.options.q.empty":"Invalid {q} value; found {empty string}","typesenseHelper.options.q.null":"Invalid {q} value; found {null}","typesenseHelper.options.q.undefined":"Invalid {q} value; found {undefined}","typesenseHelper.searchOptions.query_by.null":"Invalid {config.searchOptions.query_by} value; found {null}. Either {config.searchOptions.query_by} or {config.cluster.presetName} needs to be defined.","typesenseHelper.searchOptions.query_by.undefined":"Invalid {config.searchOptions.query_by} value; found {undefined}. Either {config.searchOptions.query_by} or {config.cluster.presetName} needs to be defined."};static getMessage(e,...t){let n=this.#G[e];if(void 0===n)return null;for(let r=0;r<t.length;r++)n=n.replace(RegExp(`%${r}`,"g"),t[r]);return n}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.FunctionUtils=window.annexSearch.FunctionUtils||class{static debounce(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(function(){e.apply(this,r)},t)}}static getEmptyPromise(){let e=Array.from(arguments);return new Promise(function(t,n){t.apply(window,e)})}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.InteractionUtils=window.annexSearch.InteractionUtils||class{static #H(){let e=document.body||document.head||document.documentElement,t=this.#I.bind(this);return e.addEventListener("click",t),!0}static #J(n){if(!1===this.#K(n,"data-annex-search"))return!1;let r=n.target.getAttribute("data-annex-search"),s=window.annexSearch.AnnexSearch.getRegistered()[0];return("inline"!==s.getConfig("layout")||"clear"===r||"focus"===r)&&!1!==["clear","focus","hide","show","toggle"].includes(r)&&("clear"===r?s.clear():"focus"===r?s.focus():"hide"===r?s.hide():"show"===r?s.show():"toggle"===r&&s.toggle())}static #I(i){return!0===this.#J(i)||!0===this.#L(i)}static #L(a){if(!1===this.#K(a,"data-annex-search-query"))return!1;let o=a.target.getAttribute("data-annex-search-query"),l=window.annexSearch.AnnexSearch.getRegistered()[0];return l.show(),l.query(o),!0}static #K(h,u){let c=h.target||null;if(null===c||!1===c.matches("["+u+"]"))return!1;h.preventDefault();let d=window.annexSearch.AnnexSearch.getRegistered();if(0===d.length){let p=window.annexSearch.ErrorUtils.getMessage("interactionUtils.zeroRegistered");return window.annexSearch.LoggingUtils.error(p),!1}if(d.length>1){let g=window.annexSearch.ErrorUtils.getMessage("interactionUtils.multipleRegistered");return window.annexSearch.LoggingUtils.error(g),!1}let f=c.getAttribute(u);return null!=f&&""!==(f=f.trim())}static setup(){return this.#H(),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.KeyboardShortcutUtils=window.annexSearch.KeyboardShortcutUtils||class{static #M={documentCatchAll:!0,documentDelete:!0,documentPaste:!0,documentEscape:!0,documentKeyboardNavigation:!0,documentKeyboardShortcut:!0,documentSelectAll:!0,documentSlash:!0,fieldEnter:!0,fieldEscape:!0};static #N(){let e=this.#O.bind(this);return document.addEventListener("paste",e),!0}static #P(){let t=this.#Q.bind(this);return document.addEventListener("keydown",t),!0}static #R(){return window.annexSearch.AnnexSearch.getActive()}static #S(){return window.annexSearch.AnnexSearch.getRegistered()}static #T(){return this.#R().getView("root").getView("header.field")}static #U(){return this.#R().getView("root").getView("body.results.found")}static #V(n){if(!1===this.#M.documentCatchAll)return!1;let r=this.#R();if(null===r||!1===r.showing()||!0===n.metaKey||!0===n.ctrlKey)return!1;let s=n.key;if(s.length>1||" "===s)return!1;let i=r.shadow.activeElement,a=this.#T(),o=this.#U();return null===i?(a.focus(),a.clear(),a.nullifyLastTypesenseSearchResponse(),a.append(s),o.smoothScrollToTop(),o.resetFocusedIndex(),a.first("input").dispatchEvent(new Event("input",{bubbles:!0,shiftKey:n.shiftKey})),!0):!0!==i.matches("input")&&(a.focus(),a.clear(),a.nullifyLastTypesenseSearchResponse(),a.append(s),o.smoothScrollToTop(),o.resetFocusedIndex(),a.first("input").dispatchEvent(new Event("input",{bubbles:!0,shiftKey:n.shiftKey})),!0)}static #W(l){if(!1===this.#X(l,"documentDelete","backspace"))return!1;let h=this.#R().shadow.activeElement,u=this.#T(),c=this.#U();return null===h?(u.focus(),u.decrement(),u.nullifyLastTypesenseSearchResponse(),c.smoothScrollToTop(),c.resetFocusedIndex(),u.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0):!0!==h.matches("input")&&(u.focus(),u.decrement(),u.nullifyLastTypesenseSearchResponse(),c.smoothScrollToTop(),c.resetFocusedIndex(),u.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0)}static #Y(d){if(!1===this.#X(d,"documentEscape","escape"))return!1;let p=this.#R().shadow.activeElement;return null===p?(this.#T().focus(),!0):!0!==p.matches("input")&&(this.#T().focus(),!0)}static #Z(g){if(!1===this.#X(g,"documentKeyboardNavigation",["tab","arrowdown","arrowup"]))return!1;let f=g.key.toLowerCase();g.preventDefault();let S="previous";"arrowdown"===f&&(S="next"),"tab"===f&&!1===g.shiftKey&&(S="next");let m=this.#U();return"next"===S?(m.next(),!0):(m.previous()||this.#R().getView("root").focus(),!0)}static #$(y){if(!1===this.#M.documentKeyboardShortcut)return!1;let x=this.#S();for(let w of x){if("inline"===w.getConfig("layout"))continue;let $=w.getHelper("config").get("keyboardShortcut");if(null==$||"⌘"!==($=$.trim().toLowerCase()).charAt(0))continue;let v=$.charAt(1),b=navigator.platform.toUpperCase().indexOf("MAC")>=0;if(b&&y.metaKey&&y.key.toLowerCase()===v||!b&&y.ctrlKey&&y.key.toLowerCase()===v)return y.preventDefault(),w.toggle(),!0}return!1}static #O(E){if(0===this.#S().length||null===this.#R())return!1;let T=this.#R();if(!1===T.showing()||!1===this.#M.documentPaste)return!1;let V=E.clipboardData.getData("text");if(0===V.length||0===(V=V.trim()).length)return!1;let _=T.shadow.activeElement,C=this.#T(),L=this.#U();return null===_?(C.focus(),C.clear(),C.nullifyLastTypesenseSearchResponse(),C.append(V),L.smoothScrollToTop(),L.resetFocusedIndex(),C.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0):!0!==_.matches("input")&&(C.focus(),C.clear(),C.nullifyLastTypesenseSearchResponse(),C.append(V),L.smoothScrollToTop(),L.resetFocusedIndex(),C.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0)}static #_(R){if(!1===this.#X(R,"documentSelectAll","a")||!1===R.metaKey)return!1;let U=this.#T();return U.focus(),U.select(),!0}static #aa(A){if(!1===this.#X(A,"documentSlash","/"))return!1;let H=this.#R().shadow.activeElement,B=this.#T();return null===H?(B.focus(),!0):!0!==H.matches("input")&&(B.focus(),!0)}static #ab(F){if(!1===this.#X(F,"fieldEnter","enter"))return!1;let D=this.#R().shadow.activeElement;if(null===D)return!1;if(!0===D.matches("input")){let K=this.#U();if(null===K.getFocusedIndex()){let q=K.getResults()[0];return void 0!==q&&(F.stopPropagation(),q.focus(),q.simulateClick(F),!0)}}return!1}static #ac(I){if(!1===this.#X(I,"fieldEscape","escape"))return!1;let M=this.#R(),k=M.shadow.activeElement;if(null===k)return!1;if(!0===k.matches("input")){I.preventDefault(),I.stopPropagation();let W=k.value.trim(),O=this.#U();if(""===W)return M.hide(),!0;let N=this.#T();return N.clear(),N.nullifyLastTypesenseSearchResponse(),O.clearResults(),O.setStateKey("idle"),M.dispatchCustomEvent("results.idle"),!0}return!1}static #Q(P){return 0!==this.#S().length&&(!0===this.#$(P)||!0===this.#Z(P)||!0===this.#Y(P)||!0===this.#ac(P)||!0===this.#ab(P)||!0===this.#aa(P)||!0===this.#_(P)||!0===this.#W(P)||(this.#V(P),!0))}static #X(j,Y,z){if(0===this.#S().length)return!1;let G=this.#R();if(null==G||!1===G.showing()||!1===this.#M[Y])return!1;z=[].concat(z);let X=j.key.toLowerCase();return!1!==z.includes(X)}static setup(){return this.#N(),this.#P(),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.LoggingUtils=window.annexSearch.LoggingUtils||class{static #ad={error:"Annex Search"};static error(){let e="%c["+this.#ad.error+"]",t=[];return t.push(e),t.push("color: red; font-weight: bold; font-family: monospace;"),t=t.concat(Array.from(arguments)),window.console&&window.console.log&&window.console.log.apply(window,t),!0}static logFailedTypesenseSearchRequestError(e){let t=e.getError(),n=t.key,r=t.message;return(this.error("Could not complete Typesense search request"),"typesenseSearchRequestResponse"===n)?(this.error("Typesense response: "+r),!0===r.includes("Forbidden - a valid `x-typesense-api-key` header must be sent.")&&(r=window.annexSearch.ErrorUtils.getMessage("loggingUtils.typesenseFailed.tip"),this.error(r)),!0):(this.error("Error: "+r),!0===r.includes("Failed to fetch")&&(r=window.annexSearch.ErrorUtils.getMessage("loggingUtils.fetchFailed.tip"),this.error(r)),!0)}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.StringUtils=window.annexSearch.StringUtils||class{static generateUUID(){let e="",t,n;for(t=0;t<36;t++)8===t||13===t||18===t||23===t?e+="-":14===t?e+="4":19===t?e+=(3&(n=16*Math.random()|0)|8).toString(16):e+=(n=16*Math.random()|0).toString(16);return e}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.BaseView=window.annexSearch.BaseView||class extends window.annexSearch.Base{_$element=null;constructor(e){super(),this._$element=e}_addEvents(){return!1}find(e){return Array.from(this._$element.querySelectorAll(e))}first(e){return this._$element.querySelector(e)}getElement(){return this._$element}removeAttribute(e){return this._$element.removeAttribute(e),!0}render(){return this._addEvents(),!0}setAttribute(e,t){return this._$element.setAttribute(e,t),!0}setView(e,t){let n=this.get("views");return void 0===n&&(n={}),n[e]=t,this.set("views",n),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.BodyView=window.annexSearch.BodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ae(){let e=window.annexSearch.ElementUtils.renderTemplate("errorBody",this._$element);return this.setView("error",e),!0}#af(){let t=window.annexSearch.ElementUtils.renderTemplate("idleBody",this._$element);return this.setView("idle",t),!0}#ag(){let n=window.annexSearch.ElementUtils.renderTemplate("resultsBody",this._$element);return this.setView("results",n),!0}render(){return this.#ae(),this.#af(),this.#ag(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ErrorBodyView=window.annexSearch.ErrorBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ah(){let e=this.getHelper("config").get("copy").error.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#ah(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.IdleBodyView=window.annexSearch.IdleBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ah(){let e=this.getHelper("config").get("copy").idle.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#ah(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.EmptyResultsBodyView=window.annexSearch.EmptyResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ah(){let e=this.getHelper("config").get("copy").empty.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#ah(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FoundResultsBodyView=window.annexSearch.FoundResultsBodyView||class extends window.annexSearch.BaseView{#ai=null;#aj=[];#ak=60;#al=.65;constructor(e){super(e)}#am(){let e=this._$element,t=this.#an.bind(this),n=this.#ak,r=window.annexSearch.FunctionUtils.debounce(t,n);return e.addEventListener("scroll",r),!0}#ao(s){let i=window.annexSearch.ElementUtils.renderTemplate("resultFoundResultsBody",this._$element);return i.set("hit",s),this.#aj.push(i),i.render(),!0}#an(a){let o;return!(this._$element.scrollTop+this._$element.clientHeight<this._$element.scrollHeight*this.#al)&&(this.getView("root.header.field").loadMore(),!0)}_addEvents(){return this.#am(),!0}clearResults(){for(this.#aj=[];this._$element.firstChild;)this._$element.removeChild(this._$element.firstChild);return this.scrollToTop(),!0}containsScrollbar(){let e=this._$element;return e.scrollHeight>e.clientHeight}drawResults(e){let t=e.hits||[];if(0===t.length)return!1;for(var n of t)this.#ao(n);return!0}getFocusedIndex(){return this.#ai}getResults(){return this.#aj}next(){if(0===this.#aj.length)return!1;if(null===this.#ai)return this.#ai=0,this.#aj[this.#ai].focus(),!0;return this.#ai!==this.#aj.length-1&&(++this.#ai,this.#aj[this.#ai].focus(),!0)}previous(){return 0!==this.#aj.length&&null!==this.#ai&&(0===this.#ai?(this.#ai=null,!1):(--this.#ai,this.#aj[this.#ai].focus(),!0))}resetFocusedIndex(){return this.setFocusedIndex(null)}setFocusedIndex(e){return this.#ai=e,!0}setFocusedIndexByResultView(e){let t=this.#aj.indexOf(e);return this.setFocusedIndex(t),!0}scrollToTop(){let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.scrollTop=0}),!0}smoothScrollToTop(){let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.scrollTo({top:0,behavior:"smooth"})}),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ResultFoundResultsBodyView=window.annexSearch.ResultFoundResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ap(){let e=this._$element,t=this.#aq.bind(this);return e.addEventListener("click",t),!0}#ar(){let n=this._$element,r=this.#as.bind(this);return n.addEventListener("focus",r),!0}#aq(s){let i=this.get("hit");return this.getWebComponent().dispatchCustomEvent("result.click",{event:s,hit:i}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}#as(a){let o=this.get("hit");return this.getWebComponent().dispatchCustomEvent("result.focus",{event:a,hit:o}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}#at(){let l=this._$element.outerHTML,h=this.get("hit");return l=window.annexSearch.ElementUtils.renderTemplateVariables(l,{hit:h}),l=this.getHelper("typesense").replaceHightlightTags(l),this._$element=this.#au(l),!0}#au(u){let c=document.createElement("template");c.innerHTML=u.trim();let d=c.content.firstChild,p=this._$element.data||{};return this._$element.replaceWith(d),d.data=p,d}#av(){let g=this.getView("root.body.results.found").getResults().indexOf(this);return this.setAttribute("data-index",g),!0}_addEvents(){return this.#ap(),this.#ar(),!0}focus(){return this._$element.focus(),this._$element.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),!0}render(){return void 0!==this.get("hit")&&(this.#at(),this.#av(),super.render(),!0)}simulateClick(e){let t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,shiftKey:e.shiftKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey});return this._$element.dispatchEvent(t),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ResultsBodyView=window.annexSearch.ResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aw(){let e=window.annexSearch.ElementUtils.renderTemplate("emptyResultsBody",this._$element);return this.setView("empty",e),!0}#ax(){let t=window.annexSearch.ElementUtils.renderTemplate("foundResultsBody",this._$element);return this.setView("found",t),!0}render(){return this.#aw(),this.#ax(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.BrandingBarFooterView=window.annexSearch.BrandingBarFooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FooterView=window.annexSearch.FooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ay(){let e=window.annexSearch.ElementUtils.renderTemplate("brandingBarFooter",this._$element);return this.setView("brandingBar",e),!0}#az(){let t=window.annexSearch.ElementUtils.renderTemplate("statusBarFooter",this._$element);return this.setView("statusBar",t),!0}render(){return this.#ay(),this.#az(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.StatusBarFooterView=window.annexSearch.StatusBarFooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ah(){let e=this.getHelper("config").get("copy").statusBar.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#ah(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FieldHeaderView=window.annexSearch.FieldHeaderView||class extends window.annexSearch.BaseView{#aA=null;#aB=!1;#aC=60;#aD=null;constructor(e){super(e)}#aE(){let e=this.#aF.bind(this);return this.first("input").addEventListener("input",e),!0}#aG(){let t=this.getHelper("config").get("keyboardShortcut");return null===t?null:t=t.trim().toLowerCase()}#aH(n,r){let s=r.getError();if("abort"===s.key)return!1;this.getWebComponent().dispatchCustomEvent("results.error",{error:s});this.getView("root.header").hideSpinner();let i=r.getResponse();return this.#aA=i,this.setStateKey("error"),window.annexSearch.LoggingUtils.logFailedTypesenseSearchRequestError(r),!0}#aF(a){let o=this.first("input").value.trim();return""===o?(this.nullifyLastTypesenseSearchResponse(),this.clear(),this.setStateKey("idle"),this.getWebComponent().dispatchCustomEvent("results.idle"),!1):o!==this.#aA?.request_params?.q&&(this.nullifyLastTypesenseSearchResponse(),this.#aB=!1,this.getView("root.body.results.found").scrollToTop(),clearTimeout(this.#aD),this.#aD=setTimeout(this.#aI.bind(this),this.#aC),!0)}#aJ(l,h){let u=h.getResponse();return this.getWebComponent().dispatchCustomEvent("results.loaded",{response:u}),this.#aA=u,this.#aB=!1,0!==u.hits.length&&(this.getView("root.body.results.found").drawResults(u),this.#aK(),!0)}#aL(c,d){let p=d.getResponse();if(!0===this.#aB){let g=this.#aJ(c,d);return!0===this.getView("root.body.results.found").containsScrollbar()||(this.loadMore(),g)}if(this.#aA=p,this.getView("root.body.results.found").clearResults(),0===p.hits.length)return this.getWebComponent().dispatchCustomEvent("results.empty"),this.setStateKey("empty"),!1;this.getWebComponent().dispatchCustomEvent("results.loaded",{response:p}),this.setStateKey("results");let f=this.getView("root.body.results.found");return f.drawResults(p),f.resetFocusedIndex(),this.#aK(),!0===f.containsScrollbar()||(this.loadMore(),!0)}#aM(S={},m){if(null===m.getError())return this.getView("root.header").hideSpinner(),this.#aL(S,m);return this.#aH(S,m)}#aI(y={}){this.getView("root.header").showSpinner();let x=this.first("input").value.trim(),w=this.#aM.bind(this,y);return this.getHelper("typesense").search(x,y).then(w)}#aN(){let $=this.getHelper("config").get("copy").placeholder;return null!=$&&(this.first("input").setAttribute("placeholder",$),!0)}#aO(){let v=this.#aG();return null!==v&&(this.first(".label").innerHTML=v.toUpperCase(),!0)}#aK(){let b=this.#aA,E=this.getView("root.header.metaBar");return E.set("typesenseSearchResponse",b),E.render(),!0}_addEvents(){return this.#aE(),!0}append(e){let t=this.first("input");return t.value=t.value+e,!0}blur(){return this.first("input").blur(),!0}clear(){return this.first("input").value="",!0}nullifyLastTypesenseSearchResponse(){return this.#aA=null,!0}decrement(){let e=this.first("input");return e.value=e.value.slice(0,-1),!0}focus(){let e=this.first("input");return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.focus()}),!0}loadMore(){if(!0===this.#aB)return!1;this.#aB=!0;if(this.getView("root.body.results.found").getResults().length>=this.#aA.found)return!1;let e=this.#aA?.page??null;if(null===e)return!1;e=parseInt(e,10),++e;let t={};return t.page=e,this.#aI(t),!0}render(){return super.render(),this.#aN(),this.#aO(),!0}select(){let e=this.first("input");return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.select()}),!0}setCaret(){let e=this.first("input"),t=e.value;return e.setSelectionRange(t.length,t.length),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.HeaderView=window.annexSearch.HeaderView||class extends window.annexSearch.BaseView{#aP=!1;constructor(e){super(e)}#ap(){let e=this.#aq.bind(this);return this._$element.addEventListener("click",e),!0}#aQ(){let t=this.#aR.bind(this);return this.first(".hide").addEventListener("click",t),!0}#aS(){let n=window.annexSearch.ElementUtils.renderTemplate("fieldHeader",this._$element);return this.setView("field",n),!0}#aT(){let r=window.annexSearch.ElementUtils.renderTemplate("metaBarHeader",this._$element);return this.setView("metaBar",r),!0}#aq(s){let i;return s.target!==this.first(".hide")&&(this.focus(),!0)}#aR(a){return this.hideWebComponent(),!1}_addEvents(){return this.#ap(),this.#aQ(),!0}blur(){return this.getView("field").blur()}focus(){return this.getView("field").focus()}render(){return this.#aS(),this.#aT(),super.render(),!0}hideSpinner(){return!1!==this.#aP&&(this.#aP=!1,this.getView("root").setAttribute("data-searching","0"),!0)}showSpinner(){return!0!==this.#aP&&(this.#aP=!0,this.getView("root").setAttribute("data-searching","1"),!0)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.MetaBarHeaderView=window.annexSearch.MetaBarHeaderView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aU(){let e=this.get("typesenseSearchResponse"),t=this.getView("root.body.results.found").getResults().length;return this.first(".showing").innerHTML=t,this.first(".found").innerHTML=e.found,!0}render(){return void 0!==this.get("typesenseSearchResponse")&&(this.#aU(),!0)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.RootView=window.annexSearch.RootView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aV(){let e=this._$element,t=this.#aW.bind(this);return e.addEventListener("click",t),!0}#aX(){let n=this.first(".content"),r=window.annexSearch.ElementUtils.renderTemplate("body",n);return this.setView("body",r),!0}#aY(){let s=this.first(".content"),i=window.annexSearch.ElementUtils.renderTemplate("footer",s);return this.setView("footer",i),!0}#aZ(){let a=this.first(".content"),o=window.annexSearch.ElementUtils.renderTemplate("header",a);return this.setView("header",o),!0}#aW(l){return l.target===this._$element&&(this.getWebComponent().hide(),!0)}_addEvents(){return this.#aV(),!0}blur(){return this.getView("header").blur()}focus(){return this.getView("header").focus()}render(){return this.#aZ(),this.#aX(),this.#aY(),super.render(),this.setStateKey("idle"),this.getWebComponent().dispatchCustomEvent("results.idle"),!0}setStateKey(e){return this._$element.setAttribute("data-state-key",e),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.AnnexSearchWidgetWebComponent=window.annexSearch.AnnexSearchWidgetWebComponent||class extends HTMLElement{#a$={};#a_=null;#a0=2147483647;#a1=!1;#a2=!1;#a3=null;#a4={};constructor(){super(),this.#a_=window.annexSearch.AnnexSearch.getRegistered().length,window.annexSearch.AnnexSearch.register(this),this.#a5(),this.#a6(),this.#a7(),this.#a8()}#a9(e,t){let n=new CustomEvent(e,{detail:t});return console.log(n.detail),this.dispatchEvent(n),!0}#ba(){return this.#a0,this.#a_,!0}#bb(){let r=this.shadow,s=window.annexSearch.ElementUtils.renderTemplate("root",r,this),i=this.getConfig("layout"),a=String(+this.getConfig("showOverlay")),o=this.#a_;if("inline"===this.getConfig("layout")&&(a=0),this.#a4.root=s,this.setAttribute("id",this.#a3),this.setAttribute("data-annex-search-layout",i),this.setAttribute("data-annex-search-overlay",a),this.setAttribute("data-annex-search-ready","1"),this.setAttribute("data-annex-search-index",o),this.setAttribute("data-annex-search-open","0"),null!==this.getConfig("name")){let l=this.getConfig("name");this.setAttribute("data-annex-search-name",l)}return"inline"===this.getConfig("layout")&&this.show(),!0}#a8(){let h=this.getHelper("config"),u=this.#bb.bind(this);return h.loadStylesheets(this).then(h.loadTemplates.bind(h)).then(u).catch(function(e){console.log(e)})}#a6(){return this.#a$.config=new window.annexSearch.ConfigHelper,this.#a$.typesense=new window.annexSearch.TypesenseHelper,!0}#a5(){return this.shadow=this.attachShadow({mode:"closed"}),!0}#a7(){return this.#a3=window.annexSearch.StringUtils.generateUUID(),!0}clear(){let e=this.getView("root").getView("root.header.field"),t=this.getView("root").getView("body.results.found");return e.focus(),e.clear(),e.nullifyLastTypesenseSearchResponse(),t.resetFocusedIndex(),e.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0}dispatchCustomEvent(e,...t){let n=this.getConfig("callbacks")||{},r=e.split(".");for(var s of r)if(null===(n=n[s]??null))return!1;return this.#a9(e,t.slice()),t.unshift(this),n.apply(window,t),!0}focus(){return this.getView("root").focus()}getConfig(e){return this.getHelper("config").get(e)}getHelper(e){return this.#a$[e]}getView(e){return this.#a4[e]}hide(){return"inline"!==this.getConfig("layout")&&!1!==this.#a2&&(window.annexSearch.AnnexSearch.clearActive(),this.dispatchCustomEvent("root.hide"),this.#a2=!1,this.#a4.root.blur(),this.setAttribute("data-annex-search-open","0"),this.setAttribute("inert",""),!0)}mount(e=null){if(null===(e=e||this.getConfig("$container")||null)){if("inline"===this.getConfig("layout"))return!1;e=document.body||document.head||document.documentElement}return e.appendChild(this),this.#a1=!0,!0}query(e){let t=this.getView("root").getView("root.header.field"),n=this.getView("root").getView("body.results.found");return t.focus(),t.clear(),t.nullifyLastTypesenseSearchResponse(),t.append(e),n.smoothScrollToTop(),n.resetFocusedIndex(),window.annexSearch.ElementUtils.waitForAnimation().then(function(){t.setCaret()}),t.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0}ready(){if(!1===this.#a1)return new Promise(function(e,t){t()});let e=this;return null===this.getAttribute("data-annex-search-ready")?new Promise(function(t,n){let r=setInterval(function(){null!==e.getAttribute("data-annex-search-ready")&&(clearInterval(r),t(e))},10)}):new Promise(function(e,t){e()})}setConfig(e,t){return"object"==typeof e?this.getHelper("config").setData(e):this.getHelper("config").set(e,t)}show(){if(!0===this.#a2)return!1;window.annexSearch.AnnexSearch.setActive(this),this.dispatchCustomEvent("root.show"),this.#a2=!0,this.#ba(),this.setAttribute("data-annex-search-open","1"),this.removeAttribute("inert");let e=this.#a4.root.getView("root.body.results.found"),t=e.getResults();if(0===t.length)return this.#a4.root.focus(),!0;let n=e.getFocusedIndex();null===n&&(n=0);let r=t[n];return void 0===r||(r.focus(),!0)}showing(){return this.#a2}toggle(){return(this.dispatchCustomEvent("root.toggle"),!0===this.#a2)?this.hide():this.show()}}}),window.annexSearch.DependencyLoader.load(function(){window.annexSearch.AnnexSearch.setup()});