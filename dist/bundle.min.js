window.annexSearch=window.annexSearch||{},window.annexSearch.DependencyLoader=function(){let e=[],t=0,n=function(e,n){return++t,s(e),!0===r(e)&&(n.apply(window.annexSearch.DependencyLoader),!0)},s=function(e){if(t>1e4){let n="Could not complete an attempt: [";throw n+=e.join(", ")+"]",window.annexSearch&&window.annexSearch.LoggingUtils&&window.annexSearch.LoggingUtils.error(n),Error(n)}},r=function(e){let t=0,n=e.length;for(;t<n;++t)if(!1===i(e[t]))return!1;return!0},i=function(e){let t=e.split("."),n=window;for(var s of t){if(void 0===n[s])return!1;n=n[s]}return!0};return{load:function(n){n=n||function(){};let s;for(;e.length>0;)!1===(s=e.shift()).apply(window.annexSearch.DependencyLoader)&&e.push(s);n(t)},push:function(t,s){"string"==typeof t&&(t=[t]);let r=[t,s],i=function(){return n.apply(window.annexSearch.DependencyLoader,r)};return e.push(i),!0}}}(),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.AnnexSearch=window.annexSearch.AnnexSearch||class{static #a=null;static #b=[];static #c="v0.1.0-dev";static #d(){for(var e in window.annexSearch)!1!==window.annexSearch.hasOwnProperty(e)&&"function"==typeof window.annexSearch[e]&&"BaseUtils"!==e&&!1!==e.endsWith("Utils")&&window.annexSearch[e].setup&&window.annexSearch[e].setup();return!0}static clearActive(){return this.#a=null,!0}static getActive(){return this.#a}static getRegistered(){return this.#b}static getShowing(){let e=this.#b,t=[];for(let n of e)!0===n.showing()&&t.push(n);return t}static getVersion(){return this.#c}static register(e){return this.#b.push(e),!0}static setActive(e){return this.#a=e,!0}static setup(){return this.#d(),window.customElements.define("annex-search-widget",window.annexSearch.AnnexSearchWidgetWebComponent),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.Base=window.annexSearch.Base||class{#e={};constructor(){}error(){let e=window.annexSearch.LoggingUtils,t=window.annexSearch.LoggingUtils.error.apply(e,arguments);return t}get(e){return this.#e[e]||void 0}getHelper(e){return this.getWebComponent().getHelper(e)}getView(e){let t=(this.get("views")||{})[e]||void 0;if(void 0!==t)return t;if("root"===e)return this.getWebComponent().getView("root");let n=e.split(".");for(let s of(t=this.getWebComponent().getView("root"),n))"root"!==s&&(t=t.getView(s));return t}getWebComponent(){return this._$element?.getRootNode()?.host||window.annexSearch.AnnexSearch.getActive()}hideWebComponent(){return this.getWebComponent().hide(),!0}set(e,t){return this.#e[e]=t,!0}setStateKey(e){return this.getView("root").setStateKey(e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ConfigHelper=window.annexSearch.ConfigHelper||class extends window.annexSearch.BaseView{#e={$container:null,callbacks:{result:{click:function(e){},copy:function(e){},focus:function(e){}},results:{empty:function(e){},error:function(e){},idle:function(e){},loaded:function(e){}},root:{hide:function(e){},show:function(e){},toggle:function(e){}}},cluster:{apiKey:null,collectionName:null,hostname:null,presetName:null},copy:{empty:{message:"No results found..."},error:{message:"Something went wrong..."},idle:{message:"Start typing to begin your search..."},placeholder:"Search...",statusBar:{message:"Instantly search through our entire database"}},debug:!0,keyboardShortcut:"⌘k",highlightTagName:"MARK",layout:"modal",mode:"auto",name:null,paths:{css:["https://local.annexsearch.com/bundle.min.css",]},schemaKey:"webResource-v0.1.0",searchOptions:{highlight_full_fields:null,highlight_affix_num_tokens:null,snippet_threshold:null},searchRequestMethod:"lifo",showOverlay:!0,templates:{}};constructor(){super()}#f(e,t){let n=window.annexSearch.ErrorUtils.getMessage("stylesheets.failedLoading");return window.annexSearch.LoggingUtils.error(n,t),e(),!0}#g(s){return window.annexSearch.ElementUtils.waitForAnimation().then(s),!0}#h(r){let i=r.shadow,a=this.#f.bind(this),o=this.#g.bind(this);return Promise.all(Array.from(new Set(this.get("paths").css)).map(function(e){return new Promise(function(t,n){let s=document.createElement("link");s.rel="stylesheet",s.href=e,s.onload=t,s.onerror=a.bind(null,n),i.appendChild(s)})})).then(function(){return new Promise(function(e){o(e)})})}get(e){if(void 0===e)return this.#e;let t=this.#e[e];if(void 0!==t)return t;let n=e.split(".");if(1===n.length){let s=window.annexSearch.ErrorUtils.getMessage("configHelper.get.key.invalid",e);this.error(s);return}for(let r of(t=this.#e,n))if(void 0===(t=t[r])){let i=window.annexSearch.ErrorUtils.getMessage("configHelper.get.key.invalid",e);this.error(i);return}return t}loadStylesheets(e){return this.#h(e)}set(e,t){if(void 0===e){let n=window.annexSearch.ErrorUtils.getMessage("configHelper.set.key.undefined");return this.error(n),!1}if(void 0===t){let s=window.annexSearch.ErrorUtils.getMessage("configHelper.set.value.undefined");return this.error(s),!1}if(void 0===this.get(e))return!1;let r=this.#e,i=this.#e[e],a=e;if(void 0===i){let o=e.split(".");for(a of(i=this.#e,o))r=i,i=i[a]}return r[a]=t,!0}setData(e){return this.#e=window.annexSearch.DataUtils.deepMerge(this.#e,e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.TypesenseHelper=window.annexSearch.TypesenseHelper||class extends window.annexSearch.BaseView{#i=null;#j=[];constructor(){super()}#k(){if(null===this.#i)return!1;let e=this.#i;this.#i=null,e.abort();let t=this.#j.indexOf(e);return -1!==t&&(this.#j.splice(t,1),!0)}#l(n){let s=n.getOptions();if(null===s.q){let r=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.null");return n.setError("option",r),!1}if(void 0===s.q){let i=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.undefined");return n.setError("option",i),!1}if(""===s.q.trim()){let a=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.empty");return n.setError("option",a),!1}let o=n.getSearchOptions();if(o.preset)return!0;if(null===o.query_by){let l=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.searchOptions.query_by.null");return n.setError("searchOptions",l),!1}if(void 0===o.query_by){let h=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.searchOptions.query_by.undefined");return n.setError("searchOptions",h),!1}return!0}getHighlightEndTag(){return"</"+this.getHelper("config").get("highlightTagName").toLowerCase()+">"}getHighlightStartTag(){return"<"+this.getHelper("config").get("highlightTagName").toLowerCase()+">"}replaceHightlightTags(e){let t=this.getHighlightStartTag(),n=this.getHighlightEndTag(),s=t.replace("<","&lt;").replace(">","&gt;"),r=n.replace("<","&lt;").replace(">","&gt;");return e=(e=e.replaceAll(s,t)).replaceAll(r,n)}search(e,t={}){this.#k();let n=new window.annexSearch.TypesenseSearchRequest(e);return(n.setOptions(t),!1===this.#l(n))?window.annexSearch.FunctionUtils.getEmptyPromise(n):(this.#i=n,this.#j.push(n),n.fetch())}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.TypesenseCollectionRequest=window.annexSearch.TypesenseCollectionRequest||class extends window.annexSearch.Base{constructor(e){super()}fetch(){let e={host:"your-typesense-host.com",port:443,protocol:"https",apiKey:"your-api-key"},t=`${e.protocol}://${e.host}:${e.port}`;async function n(n){try{let s=`${t}/collections/${n}`,r=await fetch(s,{method:"GET",headers:{"X-TYPESENSE-API-KEY":e.apiKey,"Content-Type":"application/json"}});if(!r.ok)throw Error(`HTTP error! status: ${r.status} - ${r.statusText}`);let i=await r.json();return i}catch(a){throw console.error("Error fetching collection details:",a),a}}async function s(){try{var e;let t=await n("products");console.log("Collection Details:",t),e=t,console.log(`
=== Collection: ${e.name} ===`),console.log(`Documents: ${e.num_documents}`),console.log(`Created: ${new Date(1e3*e.created_at).toLocaleDateString()}`),e.default_sorting_field&&console.log(`Default Sort: ${e.default_sorting_field}`),console.log("\nFields:"),e.fields.forEach(e=>{let t=e.optional?" (optional)":" (required)",n=e.facet?" [facetable]":"",s=!1!==e.index?" [indexed]":" [not indexed]";console.log(`  - ${e.name}: ${e.type}${t}${n}${s}`)})}catch(s){console.error("Failed to fetch collection:",s)}}function r(n){return new Promise((s,r)=>{let i=new XMLHttpRequest,a=`${t}/collections/${n}`;i.open("GET",a,!0),i.setRequestHeader("X-TYPESENSE-API-KEY",e.apiKey),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState){if(i.status>=200&&i.status<300)try{let e=JSON.parse(i.responseText);s(e)}catch(t){r(Error("Failed to parse response JSON"))}else r(Error(`HTTP error! status: ${i.status}`))}},i.onerror=function(){r(Error("Network error occurred"))},i.send()})}return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.TypesenseSearchRequest=window.annexSearch.TypesenseSearchRequest||class extends window.annexSearch.Base{#m=null;#n=!1;#o=null;#p={page:1,per_page:10};#q=null;#r=null;constructor(e){super(),this.#q=e,this.#p.q=e,this.#p.highlight_end_tag=this.getHelper("typesense").getHighlightEndTag(),this.#p.highlight_start_tag=this.getHelper("typesense").getHighlightStartTag()}#s(e,t){let n=this.#t.bind(this),s=this.#u.bind(this);return window.fetch(e,t).then(n).catch(s)}#v(){return{hostname:this.getHelper("config").get("cluster.hostname"),protocol:"https",apiKey:this.getHelper("config").get("cluster.apiKey"),collectionName:this.getHelper("config").get("cluster.collectionName"),presetName:this.getHelper("config").get("cluster.presetName")}}#w(){let r=this.#v();return r.protocol+"://"+r.hostname}#x(){return{"X-TYPESENSE-API-KEY":this.#v().apiKey,"Content-Type":"application/json"}}#y(){let i=new AbortController,a=this.#x(),o={method:"GET",signal:i.signal,headers:a};return this.#m=i,o}#z(){let l=this.getSearchOptions(),h=new URLSearchParams(l);for(let[c,u]of h.entries())u||h.delete(c);return h}#A(){let d=this.#w(),p=this.#v(),g=this.#z(),f=new URLSearchParams(g).toString();return d+"/collections/"+p.collectionName+"/documents/search?"+f}#u(m){let S=m.name,y=m.message;return this.setError(S,y),this}#B(w){this.#r=w;let x=w?.message;if(void 0!==x)throw this.setError("typesenseSearchRequestResponse",x),Error();return!1===w.ok&&alert("hmmm"),this}#t(v){let $=this.#B.bind(this);return v.json().then($)}abort(){if(!0===this.#n)return!1;this.#n=!0;let e=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.abort");return this.setError("abort",e),this.#m.abort(),!0}fetch(){let e=this.#A(),t=this.#y();return this.#s(e,t)}getError(){return this.#o}getOptions(){return this.#p}getQuery(){return this.#q}getResponse(){return this.#r}getSearchOptions(){let e=this.#v(),t=Object.assign({},this.#p);for(let n in t.preset=e.presetName||null,t)null===t[n]&&delete t[n];return t}logFailedEvent(){let e=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.general");this.error(e);let t=this.getError();if("typesenseSearchRequestResponse"===t.key){let n=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.responseReceived",t.message);if(this.error(n),!0===n.includes("Could not find a field named")){let s=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.responseReceived.fieldTip");return this.error(s),!0}if(!0===n.includes("Forbidden - a valid `x-typesense-api-key` header must be sent.")){let r=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.responseReceived.forbiddenTip");return this.error(r),!0}if(!0===n.includes("No search fields specified")){let i=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.responseReceived.queryTip");this.error(i)}return!0}return e=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.unknown",t.message),this.error(e),!0===e.includes("Failed to fetch")&&(e=window.annexSearch.ErrorUtils.getMessage("loggingUtils.fetchFailed.tip"),this.error(e)),!0}setError(e,t){return null===this.#o&&(this.#o={},this.#o.key=e,this.#o.message=t,!0)}setOptions(e){return this.#p=Object.assign({},this.#p,this.getHelper("config").get("searchOptions"),e),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.BaseUtils=window.annexSearch.BaseUtils||class{static #C=!1;static setup(){return null!=document&&("complete"===document.readyState||"interactive"===document.readyState)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.CacheUtils=window.annexSearch.CacheUtils||class extends window.annexSearch.BaseUtils{static #e={};static get(e){let t=this.#e[e];if(void 0!==t)return t}static set(e,t){return this.#e[e]=t,!0}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.DataUtils=window.annexSearch.DataUtils||class extends window.annexSearch.BaseUtils{static copyToClipboard(e){return window.navigator.clipboard.writeText(e)}static deepMerge(e,t){let n={...e};for(let s in t)t.hasOwnProperty(s)&&(t[s]&&"object"==typeof t[s]&&!Array.isArray(t[s])?n[s]&&"object"==typeof n[s]&&!Array.isArray(n[s])?n[s]=this.deepMerge(n[s],t[s]):n[s]=this.deepMerge({},t[s]):n[s]=t[s]);return n}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.ElementUtils=window.annexSearch.ElementUtils||class extends window.annexSearch.BaseUtils{static #D(e,t){let n=t.getHelper("config").get("templates")[e];return null==n?null:"function"==typeof n?n():n}static #E(s,r){let i=this.#F(s),a=this.#D(s,r)||window.annexSearch[i].markup;return new DOMParser().parseFromString(a,"text/html").body.firstElementChild}static #F(o){let l=o;return l+="View",l=l[0].toUpperCase()+l.slice(1)}static getEscapedHTML(e){return e.replace(/&(?!(?:[a-z\d]+|#\d+|#x[a-f\d]+);)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static getValueFromPath(e,t){let n=e.split("."),s=t;for(let r of n){if(s&&"object"==typeof s&&r in s){s=s[r];continue}return null}return null==s||""===(s=s.trim())?null:s=String(s)}static renderTemplate(e,t,n=null){n=n||t.getRootNode().host;let s=this.#E(e,n);t.appendChild(s);let r=s.getAttribute("data-view-name"),i=new window.annexSearch[r](s);return s.data=s.data||{},s.data.view=i,i.render(),i}static renderTemplateVariables(e,t){return e=e.replace(/\{\{([^}]+)\}\}/g,function(e,n){if(!0===n.includes("||")){let s=n.split("||").map(function(e){return e.trim()});for(let r of s){let i=window.annexSearch.ElementUtils.getValueFromPath(r,t);if(null!==i)return window.annexSearch.ElementUtils.getEscapedHTML(i)}return""}n=n.trim();let a=window.annexSearch.ElementUtils.getValueFromPath(n,t);return null===a?"":a=window.annexSearch.ElementUtils.getEscapedHTML(a)})}static waitForAnimation(){return new Promise(function(e,t){window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e()})})})}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.ErrorUtils=window.annexSearch.ErrorUtils||class extends window.annexSearch.BaseUtils{static #G={"configHelper.get.key.invalid":"Invalid {key} value passed to {base.configHelper.get}; found {%0}","configHelper.set.key.undefined":"Invalid {key} value passed to {base.configHelper.set}; found {undefined}","configHelper.set.value.undefined":"Invalid {value} value passed to {base.configHelper.set}; found {undefined}","interactionUtils.zeroRegistered":"No registered $annexSearchWidget elements found","interactionUtils.multipleRegistered":"Multiple registered $annexSearchWidget elements found. Unable to determine which $element is the target.","loggingUtils.fetchFailed.tip":"Tip: Double check that {config.cluster.hostname} is defined and correct.","stylesheets.failedLoading":"Could not load stylesheets.","typesenseSearchRequest.abort":"Abort method called against {window.annexSearch.TypesenseSearchRequest}","typesenseHelper.options.q.empty":"Invalid {q} value; found {empty string}","typesenseHelper.options.q.null":"Invalid {q} value; found {null}","typesenseHelper.options.q.undefined":"Invalid {q} value; found {undefined}","typesenseHelper.searchOptions.query_by.null":"Invalid {config.searchOptions.query_by} value; found {null}. Either {config.searchOptions.query_by} or {config.cluster.presetName} needs to be defined.","typesenseHelper.searchOptions.query_by.undefined":"Invalid {config.searchOptions.query_by} value; found {undefined}. Either {config.searchOptions.query_by} or {config.cluster.presetName} needs to be defined.","typesenseSearchRequest.failed.general":"Could not complete Typesense search request.","typesenseSearchRequest.failed.responseReceived":"Typesense response: %0","typesenseSearchRequest.failed.responseReceived.fieldTip":"Tip: Double check that {config.searchOptions.query_by} is referencing valid collection fields.","typesenseSearchRequest.failed.responseReceived.forbiddenTip":"Tip: Double check that {config.cluster.apiKey} and {config.cluster.collectionName} are defined and correct.","typesenseSearchRequest.failed.responseReceived.queryTip":"Tip: Double check that, if defined, both {config.cluster.presetName} and/or {config.searchOptions.query_by} are correct.","typesenseSearchRequest.failed.unknown":"Error: %0"};static getMessage(e,...t){let n=this.#G[e];if(void 0===n)return null;for(let s=0;s<t.length;s++)n=n.replace(RegExp(`%${s}`,"g"),t[s]);return n}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.FunctionUtils=window.annexSearch.FunctionUtils||class extends window.annexSearch.BaseUtils{static debounce(e,t){let n;return function(...s){clearTimeout(n),n=setTimeout(function(){e.apply(this,s)},t)}}static getEmptyPromise(){let e=Array.from(arguments);return new Promise(function(t,n){t.apply(window,e)})}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.InteractionUtils=window.annexSearch.InteractionUtils||class extends window.annexSearch.BaseUtils{static #H(){let e=document.body||document.head||document.documentElement,t=this.#I.bind(this);return e.addEventListener("click",t),!0}static #J(n){if(!1===this.#K(n,"data-annex-search"))return!1;let s=n.target.getAttribute("data-annex-search"),r=window.annexSearch.AnnexSearch.getRegistered()[0];return("inline"!==r.getConfig("layout")||"clear"===s||"focus"===s)&&!1!==["clear","focus","hide","show","toggle"].includes(s)&&("clear"===s?r.clear():"focus"===s?r.focus():"hide"===s?r.hide():"show"===s?r.show():"toggle"===s&&r.toggle())}static #I(i){return!0===this.#J(i)||!0===this.#L(i)}static #L(a){if(!1===this.#K(a,"data-annex-search-query"))return!1;let o=a.target.getAttribute("data-annex-search-query"),l=window.annexSearch.AnnexSearch.getRegistered()[0];return l.show(),l.query(o),!0}static #K(h,c){let u=h.target||null;if(null===u||!1===u.matches("["+c+"]"))return!1;h.preventDefault();let d=window.annexSearch.AnnexSearch.getRegistered();if(0===d.length){let p=window.annexSearch.ErrorUtils.getMessage("interactionUtils.zeroRegistered");return window.annexSearch.LoggingUtils.error(p),!1}if(d.length>1){let g=window.annexSearch.ErrorUtils.getMessage("interactionUtils.multipleRegistered");return window.annexSearch.LoggingUtils.error(g),!1}let f=u.getAttribute(c);return null!=f&&""!==(f=f.trim())}static setup(){if(!0===super.setup())return this.#H(),!0;let e=window.annexSearch.InteractionUtils.setup.bind(window.annexSearch.InteractionUtils);return document.addEventListener("DOMContentLoaded",e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.KeyboardShortcutUtils=window.annexSearch.KeyboardShortcutUtils||class extends window.annexSearch.BaseUtils{static #M={documentCatchAll:!0,documentDelete:!0,documentPaste:!0,documentEscape:!0,documentKeyboardNavigation:!0,documentKeyboardShortcut:!0,documentSelectAll:!0,documentSlash:!0,fieldEnter:!0,fieldEscape:!0,resultCopy:!0};static #N(){let e=this.#O.bind(this);return document.addEventListener("paste",e),!0}static #P(){let t=this.#Q.bind(this);return document.addEventListener("keydown",t),!0}static #R(){return window.annexSearch.AnnexSearch.getActive()}static #S(){return window.annexSearch.AnnexSearch.getRegistered()}static #T(){return this.#R().getView("root").getView("header.field")}static #U(){return this.#R().getView("root").getView("body.results.found")}static #V(n){if(!1===this.#M.documentCatchAll)return!1;let s=this.#R();if(null===s||!1===s.showing()||!0===n.metaKey||!0===n.ctrlKey)return!1;let r=n.key;if(r.length>1||" "===r)return!1;let i=s.shadow.activeElement,a=this.#T(),o=this.#U();return null===i?(a.focus(),a.clear(),a.nullifyLastTypesenseSearchResponse(),a.append(r),o.smoothScrollToTop(),o.resetFocusedIndex(),a.first("input").dispatchEvent(new Event("input",{bubbles:!0,shiftKey:n.shiftKey})),!0):!0!==i.matches("input")&&(a.focus(),a.clear(),a.nullifyLastTypesenseSearchResponse(),a.append(r),o.smoothScrollToTop(),o.resetFocusedIndex(),a.first("input").dispatchEvent(new Event("input",{bubbles:!0,shiftKey:n.shiftKey})),!0)}static #W(l){if(!1===this.#X(l,"resultCopy","c")||!1===this.#Y(l))return!1;let h=this.#R().shadow.activeElement;if(null===h)return!1;let c=this.#U().getResults();for(let u of c)if(u.getElement()===h)return u.dispatchCopyEvent(l),!0;return!1}static #Z(d){if(!1===this.#X(d,"documentDelete","backspace"))return!1;let p=this.#R().shadow.activeElement,g=this.#T(),f=this.#U();return null===p?(g.focus(),g.decrement(),g.nullifyLastTypesenseSearchResponse(),f.smoothScrollToTop(),f.resetFocusedIndex(),g.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0):!0!==p.matches("input")&&(g.focus(),g.decrement(),g.nullifyLastTypesenseSearchResponse(),f.smoothScrollToTop(),f.resetFocusedIndex(),g.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0)}static #$(m){if(!1===this.#X(m,"documentEscape","escape"))return!1;let S=this.#R().shadow.activeElement;return null===S?(this.#T().focus(),!0):!0!==S.matches("input")&&(this.#T().focus(),!0)}static #_(y){if(!1===this.#X(y,"documentKeyboardNavigation",["tab","arrowdown","arrowup"]))return!1;let w=y.key.toLowerCase();y.preventDefault();let x="previous";"arrowdown"===w&&(x="next"),"tab"===w&&!1===y.shiftKey&&(x="next");let v=this.#U();return"next"===x?(v.next(),!0):(v.previous()||this.#R().getView("root").focus(),!0)}static #aa($){if(!1===this.#M.documentKeyboardShortcut)return!1;let b=this.#S();for(let E of b){if("inline"===E.getConfig("layout"))continue;let T=E.getHelper("config").get("keyboardShortcut");if(null==T||"⌘"!==(T=T.trim().toLowerCase()).charAt(0)||!1===this.#Y($))continue;let V;if($.key.toLowerCase()===T.charAt(1))return $.preventDefault(),E.toggle(),!0}return!1}static #O(C){if(0===this.#S().length||null===this.#R())return!1;let R=this.#R();if(!1===R.showing()||!1===this.#M.documentPaste)return!1;let _=C.clipboardData.getData("text");if(0===_.length||0===(_=_.trim()).length)return!1;let U=R.shadow.activeElement,B=this.#T(),L=this.#U();return null===U?(B.focus(),B.clear(),B.nullifyLastTypesenseSearchResponse(),B.append(_),L.smoothScrollToTop(),L.resetFocusedIndex(),B.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0):!0!==U.matches("input")&&(B.focus(),B.clear(),B.nullifyLastTypesenseSearchResponse(),B.append(_),L.smoothScrollToTop(),L.resetFocusedIndex(),B.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0)}static #ab(A){if(!1===this.#X(A,"documentSelectAll","a")||!1===this.#Y(A))return!1;let H=this.#T();return H.focus(),H.select(),!0}static #ac(F){if(!1===this.#X(F,"documentSlash","/"))return!1;let D=this.#R().shadow.activeElement,k=this.#T();return null===D?(k.focus(),!0):!0!==D.matches("input")&&(k.focus(),!0)}static #ad(q){if(!1===this.#X(q,"fieldEnter","enter"))return!1;let M=this.#R().shadow.activeElement;if(null===M)return!1;if(!0===M.matches("input")){let K=this.#U();if(null===K.getFocusedIndex()){let I=K.getResults()[0];return void 0!==I&&(q.stopPropagation(),I.focus(),I.simulateClick(q),!0)}}return!1}static #ae(W){if(!1===this.#X(W,"fieldEscape","escape"))return!1;let O=this.#R(),N=O.shadow.activeElement;if(null===N)return!1;if(!0===N.matches("input")){W.preventDefault(),W.stopPropagation();let P=N.value.trim(),j=this.#U();if(""===P)return O.hide(),!0;let Y=this.#T();return Y.clear(),Y.nullifyLastTypesenseSearchResponse(),j.clearResults(),j.setStateKey("idle"),O.dispatchCustomEvent("results.idle"),!0}return!1}static #Q(z){return 0!==this.#S().length&&(!0===this.#W(z)||!0===this.#aa(z)||!0===this.#_(z)||!0===this.#$(z)||!0===this.#ae(z)||!0===this.#ad(z)||!0===this.#ac(z)||!0===this.#ab(z)||!0===this.#Z(z)||(this.#V(z),!0))}static #Y(){return!0==window.navigator.platform.toUpperCase().indexOf("MAC")>=0?!0===event.metaKey:!0===event.ctrlKey}static #X(G,X,J){if(0===this.#S().length)return!1;let Q=this.#R();if(null==Q||!1===Q.showing()||!1===this.#M[X])return!1;J=[].concat(J);let Z=G.key.toLowerCase();return!1!==J.includes(Z)}static setup(){if(!0===super.setup())return this.#N(),this.#P(),!0;let e=window.annexSearch.KeyboardShortcutUtils.setup.bind(window.annexSearch.KeyboardShortcutUtils);return document.addEventListener("DOMContentLoaded",e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.LoggingUtils=window.annexSearch.LoggingUtils||class extends window.annexSearch.BaseUtils{static #af={error:"Annex Search"};static error(){let e="%c["+this.#af.error+"]",t=Array.from(arguments);return t.unshift("color: red; font-weight: bold; font-family: monospace;"),t.unshift(e),window.console&&window.console.log&&window.console.log.apply(window,t),!0}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.StringUtils=window.annexSearch.StringUtils||class extends window.annexSearch.BaseUtils{static generateUUID(){let e="",t,n;for(t=0;t<36;t++)8===t||13===t||18===t||23===t?e+="-":14===t?e+="4":19===t?e+=(3&(n=16*Math.random()|0)|8).toString(16):e+=(n=16*Math.random()|0).toString(16);return e}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.ToastUtils=window.annexSearch.ToastUtils||class extends window.annexSearch.BaseUtils{static #ag=[];static all(){return this.#ag}static get(e){let t=[];for(let n of this.#ag)n.getWebComponent()===e&&t.push(n);return t}static remove(e){let t=this.#ag.indexOf(e);return -1!==t&&(this.#ag.splice(t,1),!0)}static #ah(e){let t=e.shadow;return t.querySelector('[data-view-name="RootView"] > div.content')}static show(e,t){let n=this.#ah(e),s=window.annexSearch.ElementUtils.renderTemplate("toast",n);return this.#ag.push(s),t.hideTimeoutDuration&&s.setHideTimeoutDuration(t.hideTimeoutDuration),t.message&&s.setMessage(t.message),t.title&&s.setTitle(t.title),s.show(),!0}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.BaseView=window.annexSearch.BaseView||class extends window.annexSearch.Base{_$element=null;constructor(e){super(),this._$element=e}find(e){return Array.from(this._$element.querySelectorAll(e))}first(e){return this._$element.querySelector(e)}getElement(){return this._$element}removeAttribute(e){return this._$element.removeAttribute(e),!0}setAttribute(e,t){return this._$element.setAttribute(e,t),!0}setView(e,t){let n=this.get("views");return void 0===n&&(n={}),n[e]=t,this.set("views",n),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.BodyView=window.annexSearch.BodyView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="BodyView">
</div>`;constructor(e){super(e)}#ai(){let e=window.annexSearch.ElementUtils.renderTemplate("errorBody",this._$element);return this.setView("error",e),!0}#aj(){let t=window.annexSearch.ElementUtils.renderTemplate("idleBody",this._$element);return this.setView("idle",t),!0}#ak(){let n=window.annexSearch.ElementUtils.renderTemplate("resultsBody",this._$element);return this.setView("results",n),!0}render(){return this.#ai(),this.#aj(),this.#ak(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ErrorBodyView=window.annexSearch.ErrorBodyView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="ErrorBodyView">
    <div class="graphic"></div>
    <div class="message"></div>
</div>`;constructor(e){super(e)}#al(){let e=this.getHelper("config").get("copy").error.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#al(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.IdleBodyView=window.annexSearch.IdleBodyView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="IdleBodyView">
    <div class="graphic"></div>
    <div class="message"></div>
</div>`;constructor(e){super(e)}#al(){let e=this.getHelper("config").get("copy").idle.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#al(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.EmptyResultsBodyView=window.annexSearch.EmptyResultsBodyView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="EmptyResultsBodyView">
    <div class="graphic"></div>
    <div class="message"></div>
</div>`;constructor(e){super(e)}#al(){let e=this.getHelper("config").get("copy").empty.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#al(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FoundResultsBodyView=window.annexSearch.FoundResultsBodyView||class extends window.annexSearch.BaseView{#am=null;#an=[];#ao=60;#ap=.65;static markup=`
<div data-view-name="FoundResultsBodyView">
</div>`;constructor(e){super(e)}#aq(){return this.#ar(),!0}#ar(){let e=this._$element,t=this.#as.bind(this),n=this.#ao,s=window.annexSearch.FunctionUtils.debounce(t,n);return e.addEventListener("scroll",s),!0}#at(r){let i=window.annexSearch.ElementUtils.renderTemplate("resultFoundResultsBody",this._$element);return i.set("hit",r),this.#an.push(i),i.render(),!0}#as(a){let o;return!(this._$element.scrollTop+this._$element.clientHeight<this._$element.scrollHeight*this.#ap)&&(this.getView("root.header.field").loadMore(),!0)}clearResults(){for(this.#an=[];this._$element.firstChild;)this._$element.removeChild(this._$element.firstChild);return this.scrollToTop(),!0}containsScrollbar(){let e=this._$element;return e.scrollHeight>e.clientHeight}drawResults(e){let t=e.hits||[];if(0===t.length)return!1;for(var n of t)this.#at(n);return!0}getFocusedIndex(){return this.#am}getResults(){return this.#an}next(){if(0===this.#an.length)return!1;if(null===this.#am)return this.#am=0,this.#an[this.#am].focus(),!0;return this.#am!==this.#an.length-1&&(++this.#am,this.#an[this.#am].focus(),!0)}previous(){return 0!==this.#an.length&&null!==this.#am&&(0===this.#am?(this.#am=null,!1):(--this.#am,this.#an[this.#am].focus(),!0))}resetFocusedIndex(){return this.setFocusedIndex(null)}render(){return this.#aq(),!0}setFocusedIndex(e){return this.#am=e,!0}setFocusedIndexByResultView(e){let t=this.#an.indexOf(e);return this.setFocusedIndex(t),!0}scrollToTop(){let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.scrollTop=0}),!0}smoothScrollToTop(){let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.scrollTo({top:0,behavior:"smooth"})}),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ResultFoundResultsBodyView=window.annexSearch.ResultFoundResultsBodyView||class extends window.annexSearch.BaseView{static markup=`
<a data-view-name="ResultFoundResultsBodyView" href="https://{{hit.document.hostname}}{{hit.document.relativeURL}}">
    <div class="title">{{hit.highlight.title.snippet || hit.document.title}}</div>
    <div class="body">{{hit.highlight.body.snippet || hit.document.body}}</div>
    <div class="uri truncate">https://{{hit.document.hostname}}{{hit.document.relativeURL}}</div>
</a>`;constructor(e){super(e)}#au(){let e=this._$element,t=this.#av.bind(this);return e.addEventListener("click",t),!0}#aq(){return this.#au(),this.#aw(),this.#P(),!0}#aw(){let n=this._$element,s=this.#ax.bind(this);return n.addEventListener("focus",s),!0}#P(){if(!0===this._$element.hasAttribute("href"))return!1;let r=this._$element,i=this.#Q.bind(this);return r.addEventListener("keydown",i),!0}#av(a){let o=this.get("hit"),l=this._$element;return this.getWebComponent().dispatchCustomEvent("result.click",{$result:l,event:a,hit:o}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}#ax(h){let c=this.get("hit"),u=this._$element;return this.getWebComponent().dispatchCustomEvent("result.focus",{$result:u,event:h,hit:c}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}#Q(d){let p=d.key;return"enter"===(p=p.toLowerCase())&&(this.simulateClick(d),!0)}#ay(){let g=this._$element.outerHTML,f=this.get("hit");return g=window.annexSearch.ElementUtils.renderTemplateVariables(g,{hit:f}),g=this.getHelper("typesense").replaceHightlightTags(g),this._$element=this.#az(g),!0}#az(m){let S=document.createElement("template");S.innerHTML=m.trim();let y=S.content.firstChild,w=this._$element.data||{};return this._$element.replaceWith(y),y.data=w,y}#aA(){let x=this.getView("root.body.results.found").getResults().indexOf(this);return this.setAttribute("data-index",x),!0}#aB(){return!0!==this._$element.hasAttribute("href")&&(this.setAttribute("tabindex",0),!0)}dispatchCopyEvent(e){let t=this.get("hit"),n=this._$element;return this.getWebComponent().dispatchCustomEvent("result.copy",{$result:n,event:e,hit:t}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}focus(){return this._$element.focus(),this._$element.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),!0}render(){return void 0!==this.get("hit")&&(this.#ay(),this.#aA(),this.#aB(),this.#aq(),!0)}simulateClick(e){let t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,shiftKey:e.shiftKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey});return this._$element.dispatchEvent(t),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ResultsBodyView=window.annexSearch.ResultsBodyView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="ResultsBodyView">
</div>`;constructor(e){super(e)}#aC(){let e=window.annexSearch.ElementUtils.renderTemplate("emptyResultsBody",this._$element);return this.setView("empty",e),!0}#aD(){let t=window.annexSearch.ElementUtils.renderTemplate("foundResultsBody",this._$element);return this.setView("found",t),!0}render(){return this.#aC(),this.#aD(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ToastView=window.annexSearch.ToastView||class extends window.annexSearch.BaseView{#aE=5e3;#aF=null;#aG="(message)";#aH="(title)";static markup=`
<div data-view-name="ToastView">
    <div class="title"></div>
    <div class="message"></div>
</div>`;constructor(e){super(e)}#au(){let e=this._$element,t=this.#av.bind(this);return e.addEventListener("click",t),!0}#aq(){return null!==this.#aH&&(this.#au(),!0)}#aI(){return this._$element.remove(),window.annexSearch.ToastUtils.remove(this),!0}#av(n){return this.hide(),!0}#aJ(){let s=this.getWebComponent(),r=window.annexSearch.ToastUtils.get(s);for(let i of r)i!==this&&i.hide();return!0}#aK(){let a,o=setTimeout(this.hide.bind(this),this.#aE);return this.#aF=o,!0}hide(){this._$element.classList.remove("visible"),clearTimeout(this.#aF);var e=this.#aI.bind(this);return this._$element.addEventListener("transitionend",e),!0}render(){return this.#aq(),!0}setHideTimeoutDuration(e=null){return this.#aE=e||this.#aE,!0}setMessage(e){return this.first(".message").innerHTML=e,!0}setTitle(e){return this.first(".title").innerHTML=e,!0}show(){this.#aJ(),this.#aK();let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.classList.add("visible")}),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.BrandingBarFooterView=window.annexSearch.BrandingBarFooterView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="BrandingBarFooterView">
    Powered by <a href="https://annexsearch.com/" target="_blank">Annex Search</a>
</div>`;constructor(e){super(e)}render(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FooterView=window.annexSearch.FooterView||class extends window.annexSearch.BaseView{static markup=`
<div class="clearfix" data-view-name="FooterView">
</div>`;constructor(e){super(e)}#aL(){let e=window.annexSearch.ElementUtils.renderTemplate("brandingBarFooter",this._$element);return this.setView("brandingBar",e),!0}#aM(){let t=window.annexSearch.ElementUtils.renderTemplate("statusBarFooter",this._$element);return this.setView("statusBar",t),!0}render(){return this.#aL(),this.#aM(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.StatusBarFooterView=window.annexSearch.StatusBarFooterView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="StatusBarFooterView">
    <div class="message truncate"></div>
</div>`;constructor(e){super(e)}#al(){let e=this.getHelper("config").get("copy").statusBar.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#al(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FieldHeaderView=window.annexSearch.FieldHeaderView||class extends window.annexSearch.BaseView{#aN=null;#aO=!1;#aP=60;#aQ=null;static markup=`
<div class="clearfix" data-view-name="FieldHeaderView">
    <div class="label"></div>
    <div class="input">
        <input type="search" name="query" id="query" spellcheck="false" autocapitalize="off" autocorrect="off" />
    </div>
</div>`;constructor(e){super(e)}#aq(){return this.#aR(),!0}#aR(){let e=this.#aS.bind(this);return this.first("input").addEventListener("input",e),!0}#aT(){let t=this.getHelper("config").get("keyboardShortcut");return null===t?null:t=t.trim().toLowerCase()}#aU(n,s){let r=s.getError();if("abort"===r.key)return!1;this.getWebComponent().dispatchCustomEvent("results.error",{error:r});this.getView("root.header").hideSpinner();let i=s.getResponse();return this.#aN=i,this.setStateKey("error"),s.logFailedEvent(),!0}#aS(a){let o=this.first("input").value.trim();return""===o?(this.nullifyLastTypesenseSearchResponse(),this.clear(),this.setStateKey("idle"),this.getWebComponent().dispatchCustomEvent("results.idle"),!1):o!==this.#aN?.request_params?.q&&(this.nullifyLastTypesenseSearchResponse(),this.#aO=!1,this.getView("root.body.results.found").scrollToTop(),clearTimeout(this.#aQ),this.#aQ=setTimeout(this.#aV.bind(this),this.#aP),!0)}#aW(l,h){let c=h.getResponse();return this.getWebComponent().dispatchCustomEvent("results.loaded",{response:c}),this.#aN=c,this.#aO=!1,0!==c.hits.length&&(this.getView("root.body.results.found").drawResults(c),this.#aX(),!0)}#aY(u,d){let p=d.getResponse();if(!0===this.#aO){let g=this.#aW(u,d);return!0===this.getView("root.body.results.found").containsScrollbar()||(this.loadMore(),g)}if(this.#aN=p,this.getView("root.body.results.found").clearResults(),0===p.hits.length)return this.getWebComponent().dispatchCustomEvent("results.empty"),this.setStateKey("empty"),!1;this.getWebComponent().dispatchCustomEvent("results.loaded",{response:p}),this.setStateKey("results");let f=this.getView("root.body.results.found");return f.drawResults(p),f.resetFocusedIndex(),this.#aX(),!0===f.containsScrollbar()||(this.loadMore(),!0)}#aZ(m={},S){if(null===S.getError())return this.getView("root.header").hideSpinner(),this.#aY(m,S);return this.#aU(m,S)}#aV(y={}){this.getView("root.header").showSpinner();let w=this.first("input").value.trim(),x=this.#aZ.bind(this,y);return this.getHelper("typesense").search(w,y).then(x)}#a$(){let v=this.getHelper("config").get("copy").placeholder;return null!=v&&(this.first("input").setAttribute("placeholder",v),!0)}#a_(){let $=this.#aT();return null!==$&&(this.first(".label").innerHTML=$.toUpperCase(),!0)}#aX(){let b=this.#aN,E=this.getView("root.header.metaBar");return E.set("typesenseSearchResponse",b),E.render(),!0}append(e){let t=this.first("input");return t.value=t.value+e,!0}blur(){return this.first("input").blur(),!0}clear(){return this.first("input").value="",!0}nullifyLastTypesenseSearchResponse(){return this.#aN=null,!0}decrement(){let e=this.first("input");return e.value=e.value.slice(0,-1),!0}focus(){let e=this.first("input");return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.focus()}),!0}loadMore(){if(!0===this.#aO)return!1;this.#aO=!0;if(this.getView("root.body.results.found").getResults().length>=this.#aN.found)return!1;let e=this.#aN?.page??null;if(null===e)return!1;e=parseInt(e,10),++e;let t={};return t.page=e,this.#aV(t),!0}render(){return this.#aq(),this.#a$(),this.#a_(),!0}select(){let e=this.first("input");return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.select()}),!0}setCaret(){let e=this.first("input"),t=e.value;return e.setSelectionRange(t.length,t.length),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.HeaderView=window.annexSearch.HeaderView||class extends window.annexSearch.BaseView{#a0=!1;static markup=`
<div data-view-name="HeaderView">
    <div class="hide icon icon-plus icon-size-14"></div>
    <div class="spinner spinning icon icon-spinner"></div>
</div>`;constructor(e){super(e)}#au(){let e=this.#av.bind(this);return this._$element.addEventListener("click",e),!0}#aq(){return this.#au(),this.#a1(),!0}#a1(){let t=this.#a2.bind(this);return this.first(".hide").addEventListener("click",t),!0}#a3(){let n=window.annexSearch.ElementUtils.renderTemplate("fieldHeader",this._$element);return this.setView("field",n),!0}#a4(){let s=window.annexSearch.ElementUtils.renderTemplate("metaBarHeader",this._$element);return this.setView("metaBar",s),!0}#av(r){let i;return r.target!==this.first(".hide")&&(this.focus(),!0)}#a2(a){return this.hideWebComponent(),!1}blur(){return this.getView("field").blur()}focus(){return this.getView("field").focus()}render(){return this.#a3(),this.#a4(),this.#aq(),!0}hideSpinner(){return!1!==this.#a0&&(this.#a0=!1,this.getView("root").setAttribute("data-searching","0"),!0)}showSpinner(){return!0!==this.#a0&&(this.#a0=!0,this.getView("root").setAttribute("data-searching","1"),!0)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.MetaBarHeaderView=window.annexSearch.MetaBarHeaderView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="MetaBarHeaderView">
    Showing
    <span class="showing">xx</span> of
    <span class="found">yy</span>
    matching results
</div>`;constructor(e){super(e)}#a5(){let e=this.get("typesenseSearchResponse"),t=this.getView("root.body.results.found").getResults().length;return this.first(".showing").innerHTML=t,this.first(".found").innerHTML=e.found,!0}render(){return void 0!==this.get("typesenseSearchResponse")&&(this.#a5(),!0)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.RootView=window.annexSearch.RootView||class extends window.annexSearch.BaseView{static markup=`
<div data-view-name="RootView" data-state-key="idle">
    <div class="content"></div>
</div>`;constructor(e){super(e)}#aq(){return this.#a6(),!0}#a6(){let e=this._$element,t=this.#a7.bind(this);return e.addEventListener("click",t),!0}#a8(){let n=this.first(".content"),s=window.annexSearch.ElementUtils.renderTemplate("body",n);return this.setView("body",s),!0}#a9(){let r=this.first(".content"),i=window.annexSearch.ElementUtils.renderTemplate("footer",r);return this.setView("footer",i),!0}#ba(){let a=this.first(".content"),o=window.annexSearch.ElementUtils.renderTemplate("header",a);return this.setView("header",o),!0}#a7(l){return l.target===this._$element&&(this.getWebComponent().hide(),!0)}blur(){return this.getView("header").blur()}focus(){return this.getView("header").focus()}render(){return this.#ba(),this.#a8(),this.#a9(),this.#aq(),this.setStateKey("idle"),this.getWebComponent().dispatchCustomEvent("results.idle"),!0}setStateKey(e){return this._$element.setAttribute("data-state-key",e),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.AnnexSearchWidgetWebComponent=window.annexSearch.AnnexSearchWidgetWebComponent||class extends HTMLElement{#bb={};#bc=null;#bd=2147483647;#be=!1;#bf=!1;#bg=null;#bh={};constructor(){super(),this.#bc=window.annexSearch.AnnexSearch.getRegistered().length,window.annexSearch.AnnexSearch.register(this),this.#bi(),this.#bj(),this.#bk(),this.#bl()}#bm(){return this.#bd,this.#bc,!0}#bn(){let e=this.shadow,t=window.annexSearch.ElementUtils.renderTemplate("root",e,this),n=this.getConfig("layout"),s=String(+this.getConfig("showOverlay")),r=this.#bc;"inline"===this.getConfig("layout")&&(s=0),this.#bh.root=t,this.setAttribute("id",this.#bg);let i=this.getConfig("mode");if(this.setAttribute("data-annex-search-mode",i),this.setAttribute("data-annex-search-layout",n),this.setAttribute("data-annex-search-overlay",s),this.setAttribute("data-annex-search-ready","1"),this.setAttribute("data-annex-search-index",r),this.setAttribute("data-annex-search-open","0"),null!==this.getConfig("name")){let a=this.getConfig("name");this.setAttribute("data-annex-search-name",a)}return"inline"===this.getConfig("layout")&&this.show(),!0}#bl(){let o=this.getHelper("config"),l=this.#bn.bind(this);return o.loadStylesheets(this).then(l).catch(function(e){console.log(e)})}#bj(){return this.#bb.config=new window.annexSearch.ConfigHelper,this.#bb.typesense=new window.annexSearch.TypesenseHelper,!0}#bi(){return this.shadow=this.attachShadow({mode:"closed"}),!0}#bk(){return this.#bg=window.annexSearch.StringUtils.generateUUID(),!0}clear(){let e=this.getView("root").getView("root.header.field"),t=this.getView("root").getView("body.results.found");return e.focus(),e.clear(),e.nullifyLastTypesenseSearchResponse(),t.resetFocusedIndex(),e.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0}dispatchCustomEvent(e,t={}){t.$annexSearchWidget=this;let n=new CustomEvent(e,{detail:t}),s=this.getConfig("callbacks")||{},r=e.split(".");for(var i of r)if(null===(s=s[i]??null))break;return s&&s&&s.apply(this,[n]),this.dispatchEvent(n),!0}focus(){return this.getView("root").focus()}getConfig(e){return this.getHelper("config").get(e)}getHelper(e){return this.#bb[e]}getView(e){return this.#bh[e]}hide(){return"inline"!==this.getConfig("layout")&&!1!==this.#bf&&(window.annexSearch.AnnexSearch.clearActive(),this.dispatchCustomEvent("root.hide"),this.#bf=!1,this.#bh.root.blur(),this.setAttribute("data-annex-search-open","0"),this.setAttribute("inert",""),!0)}mount(e=null){if(null===(e=e||this.getConfig("$container")||null)){if("inline"===this.getConfig("layout"))return!1;e=document.body||document.head||document.documentElement}return e.appendChild(this),this.#be=!0,!0}query(e){let t=this.getView("root").getView("root.header.field"),n=this.getView("root").getView("body.results.found");return t.focus(),t.clear(),t.nullifyLastTypesenseSearchResponse(),t.append(e),n.smoothScrollToTop(),n.resetFocusedIndex(),window.annexSearch.ElementUtils.waitForAnimation().then(function(){t.setCaret()}),t.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0}ready(){if(!1===this.#be)return new Promise(function(e,t){t()});let e=this;return null===this.getAttribute("data-annex-search-ready")?new Promise(function(t,n){let s=setInterval(function(){null!==e.getAttribute("data-annex-search-ready")&&(clearInterval(s),t(e))},10)}):new Promise(function(e,t){e()})}setConfig(e,t){return"object"==typeof e?this.getHelper("config").setData(e):this.getHelper("config").set(e,t)}show(){if(!0===this.#bf)return!1;window.annexSearch.AnnexSearch.setActive(this),this.dispatchCustomEvent("root.show"),this.#bf=!0,this.#bm(),this.setAttribute("data-annex-search-open","1"),this.removeAttribute("inert");let e=this.#bh.root.getView("root.body.results.found"),t=e.getResults();if(0===t.length)return this.#bh.root.focus(),!0;let n=e.getFocusedIndex();null===n&&(n=0);let s=t[n];return void 0===s||(s.focus(),!0)}showing(){return this.#bf}showToast(e,t,n=null){return window.annexSearch.ToastUtils.show(this,{title:e,message:t,hideTimeoutDuration:n})}toggle(){return(this.dispatchCustomEvent("root.toggle"),!0===this.#bf)?this.hide():this.show()}}}),window.annexSearch.DependencyLoader.load(function(){window.annexSearch.AnnexSearch.setup()});
