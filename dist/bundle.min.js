window.annexSearch=window.annexSearch||{},window.annexSearch.DependencyLoader=function(){let e=[],t=0,n=function(e,n){return++t,r(e),!0===s(e)&&(n.apply(window.annexSearch.DependencyLoader),!0)},r=function(e){if(t>1e4){let n="Could not complete an attempt: [";throw n+=e.join(", ")+"]",window.annexSearch&&window.annexSearch.LoggingUtils&&window.annexSearch.LoggingUtils.error(n),Error(n)}},s=function(e){let t=0,n=e.length;for(;t<n;++t)if(!1===i(e[t]))return!1;return!0},i=function(e){let t=e.split("."),n=window;for(var r of t){if(void 0===n[r])return!1;n=n[r]}return!0};return{load:function(n){n=n||function(){};let r;for(;e.length>0;)!1===(r=e.shift()).apply(window.annexSearch.DependencyLoader)&&e.push(r);n(t)},push:function(t,r){"string"==typeof t&&(t=[t]);let s=[t,r],i=function(){return n.apply(window.annexSearch.DependencyLoader,s)};return e.push(i),!0}}}(),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.AnnexSearch=window.annexSearch.AnnexSearch||class{static #a=null;static #b=[];static #c="v0.1.0-dev";static #d(){return window.annexSearch.CacheUtils.setup(),window.annexSearch.DataUtils.setup(),window.annexSearch.ElementUtils.setup(),window.annexSearch.ErrorUtils.setup(),window.annexSearch.FunctionUtils.setup(),window.annexSearch.InteractionUtils.setup(),window.annexSearch.KeyboardShortcutUtils.setup(),window.annexSearch.LoggingUtils.setup(),window.annexSearch.StringUtils.setup(),!0}static clearActive(){return this.#a=null,!0}static getActive(){return this.#a}static getRegistered(){return this.#b}static getShowing(){let e=this.#b,t=[];for(let n of e)!0===n.showing()&&t.push(n);return t}static getVersion(){return this.#c}static register(e){return this.#b.push(e),!0}static setActive(e){return this.#a=e,!0}static setup(){return this.#d(),window.customElements.define("annex-search-widget",window.annexSearch.AnnexSearchWidgetWebComponent),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.Base=window.annexSearch.Base||class{#e={};constructor(){}error(){let e=window.annexSearch.LoggingUtils,t=window.annexSearch.LoggingUtils.error.apply(e,arguments);return t}get(e){return this.#e[e]||void 0}getHelper(e){return this.getWebComponent().getHelper(e)}getView(e){let t=(this.get("views")||{})[e]||void 0;if(void 0!==t)return t;if("root"===e)return this.getWebComponent().getView("root");let n=e.split(".");for(let r of(t=this.getWebComponent().getView("root"),n))"root"!==r&&(t=t.getView(r));return t}getWebComponent(){return this._$element?.getRootNode()?.host||window.annexSearch.AnnexSearch.getActive()}hideWebComponent(){return this.getWebComponent().hide(),!0}set(e,t){return this.#e[e]=t,!0}setStateKey(e){return this.getView("root").setStateKey(e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ConfigHelper=window.annexSearch.ConfigHelper||class extends window.annexSearch.BaseView{#e={$container:null,callbacks:{result:{click:function(e,t,n){},focus:function(e,t,n){console.log("result.focus",e,t,n)}},results:{empty:function(e){},error:function(e,t){},idle:function(e){},loaded:function(e,t){}},root:{hide:function(e){},show:function(e){},toggle:function(e){}}},cluster:{apiKey:null,collectionName:null,hostname:null,presetName:null},copy:{empty:{message:"No results found..."},error:{message:"Something went wrong..."},idle:{message:"Start typing to begin your search..."},placeholder:"Search...",statusBar:{message:"Instantly search through 10,000+ results"}},debug:!0,keyboardShortcut:"⌘k",highlightTagName:"MARK",layout:"modal",name:null,paths:{css:["https://local.annexsearch.com/ts/css",],templates:"https://local.annexsearch.com/ts/templates"},schema:"webResource-v0.1.0",searchOptions:{highlight_full_fields:null,highlight_affix_num_tokens:null,snippet_threshold:null},searchRequestMethod:"lifo",showOverlay:!0,templates:{}};constructor(){super()}#f(e){let t=e.match(/<script\b[^>]*>[\s\S]*?<\/script>/gi);for(let n of t){let r=n.match(/data-template-id=["']([^"']+)["']/),s=r?r[1]:null;null!==s&&(this.#e.templates[s]=n)}return window.annexSearch.CacheUtils.set("templates",this.#e.templates),!0}#g(i,a){let o=window.annexSearch.ErrorUtils.getMessage("stylesheets.failedLoading");return window.annexSearch.LoggingUtils.error(o,a),i(),!0}#h(l){return window.annexSearch.ElementUtils.waitForAnimation().then(l),!0}#i(h){let u=h.shadow,c=this.#g.bind(this),d=this.#h.bind(this);return Promise.all(Array.from(new Set(this.get("paths").css)).map(function(e){return new Promise(function(t,n){let r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onload=t,r.onerror=c.bind(null,n),u.appendChild(r)})})).then(function(){return new Promise(function(e){d(e)})})}#j(){let p=this.#f.bind(this);return fetch(this.#e.paths.templates).then(function(e){return e.text()}).then(p)}get(e){if(void 0===e)return this.#e;let t=this.#e[e];if(void 0!==t)return t;let n=e.split(".");if(1===n.length){let r=window.annexSearch.ErrorUtils.getMessage("configHelper.get.key.invalid",e);this.error(r);return}for(let s of(t=this.#e,n))if(void 0===(t=t[s])){let i=window.annexSearch.ErrorUtils.getMessage("configHelper.get.key.invalid",e);this.error(i);return}return t}loadStylesheets(e){return this.#i(e)}loadTemplates(){let e=window.annexSearch.CacheUtils.get("templates");return void 0===e?this.#j():(this.#e.templates=e,console.log("oh"),!0)}set(e,t){if(void 0===e){let n=window.annexSearch.ErrorUtils.getMessage("configHelper.set.key.undefined");return this.error(n),!1}if(void 0===t){let r=window.annexSearch.ErrorUtils.getMessage("configHelper.set.value.undefined");return this.error(r),!1}if(void 0===this.get(e))return!1;let s=this.#e,i=this.#e[e],a=e;if(void 0===i){let o=e.split(".");for(a of(i=this.#e,o))s=i,i=i[a]}return s[a]=t,!0}setData(e){return this.#e=window.annexSearch.DataUtils.deepMerge(this.#e,e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.TypesenseHelper=window.annexSearch.TypesenseHelper||class extends window.annexSearch.BaseView{#k=null;#l=[];constructor(){super()}#m(){if(null===this.#k)return!1;let e=this.#k;this.#k=null,e.abort();let t=this.#l.indexOf(e);return -1!==t&&(this.#l.splice(t,1),!0)}#n(n){let r=n.getOptions();if(null===r.q){let s=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.null");return n.setError("option",s),!1}if(void 0===r.q){let i=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.undefined");return n.setError("option",i),!1}if(""===r.q.trim()){let a=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.empty");return n.setError("option",a),!1}let o=n.getSearchOptions();if(o.preset)return!0;if(null===o.query_by){let l=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.searchOptions.query_by.null");return n.setError("searchOptions",l),!1}if(void 0===o.query_by){let h=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.searchOptions.query_by.undefined");return n.setError("searchOptions",h),!1}return!0}getHighlightEndTag(){return"</"+this.getHelper("config").get("highlightTagName").toLowerCase()+">"}getHighlightStartTag(){return"<"+this.getHelper("config").get("highlightTagName").toLowerCase()+">"}replaceHightlightTags(e){let t=this.getHighlightStartTag(),n=this.getHighlightEndTag(),r=t.replace("<","&lt;").replace(">","&gt;"),s=n.replace("<","&lt;").replace(">","&gt;");return e=(e=e.replaceAll(r,t)).replaceAll(s,n)}search(e,t={}){this.#m();let n=new window.annexSearch.TypesenseSearchRequest(e);return(n.setOptions(t),!1===this.#n(n))?window.annexSearch.FunctionUtils.getEmptyPromise(n):(this.#k=n,this.#l.push(n),n.fetch())}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.TypesenseCollectionRequest=window.annexSearch.TypesenseCollectionRequest||class extends window.annexSearch.Base{constructor(e){super()}fetch(){let e={host:"your-typesense-host.com",port:443,protocol:"https",apiKey:"your-api-key"},t=`${e.protocol}://${e.host}:${e.port}`;async function n(n){try{let r=`${t}/collections/${n}`,s=await fetch(r,{method:"GET",headers:{"X-TYPESENSE-API-KEY":e.apiKey,"Content-Type":"application/json"}});if(!s.ok)throw Error(`HTTP error! status: ${s.status} - ${s.statusText}`);let i=await s.json();return i}catch(a){throw console.error("Error fetching collection details:",a),a}}async function r(){try{var e;let t=await n("products");console.log("Collection Details:",t),e=t,console.log(`
=== Collection: ${e.name} ===`),console.log(`Documents: ${e.num_documents}`),console.log(`Created: ${new Date(1e3*e.created_at).toLocaleDateString()}`),e.default_sorting_field&&console.log(`Default Sort: ${e.default_sorting_field}`),console.log("\nFields:"),e.fields.forEach(e=>{let t=e.optional?" (optional)":" (required)",n=e.facet?" [facetable]":"",r=!1!==e.index?" [indexed]":" [not indexed]";console.log(`  - ${e.name}: ${e.type}${t}${n}${r}`)})}catch(r){console.error("Failed to fetch collection:",r)}}function s(n){return new Promise((r,s)=>{let i=new XMLHttpRequest,a=`${t}/collections/${n}`;i.open("GET",a,!0),i.setRequestHeader("X-TYPESENSE-API-KEY",e.apiKey),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState){if(i.status>=200&&i.status<300)try{let e=JSON.parse(i.responseText);r(e)}catch(t){s(Error("Failed to parse response JSON"))}else s(Error(`HTTP error! status: ${i.status}`))}},i.onerror=function(){s(Error("Network error occurred"))},i.send()})}return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.TypesenseSearchRequest=window.annexSearch.TypesenseSearchRequest||class extends window.annexSearch.Base{#o=null;#p=!1;#q=null;#r={page:1,per_page:10};#s=null;#t=null;constructor(e){super(),this.#s=e,this.#r.q=e,this.#r.highlight_end_tag=this.getHelper("typesense").getHighlightEndTag(),this.#r.highlight_start_tag=this.getHelper("typesense").getHighlightStartTag()}#u(e,t){let n=this.#v.bind(this),r=this.#w.bind(this);return window.fetch(e,t).then(n).catch(r)}#x(){return{hostname:this.getHelper("config").get("cluster.hostname"),protocol:"https",apiKey:this.getHelper("config").get("cluster.apiKey"),collectionName:this.getHelper("config").get("cluster.collectionName"),presetName:this.getHelper("config").get("cluster.presetName")}}#y(){let s=this.#x();return s.protocol+"://"+s.hostname}#z(){return{"X-TYPESENSE-API-KEY":this.#x().apiKey,"Content-Type":"application/json"}}#A(){let i=new AbortController,a=this.#z(),o={method:"GET",signal:i.signal,headers:a};return this.#o=i,o}#B(){let l=this.getSearchOptions(),h=new URLSearchParams(l);for(let[u,c]of h.entries())c||h.delete(u);return h}#C(){let d=this.#y(),p=this.#x(),g=this.#B(),f=new URLSearchParams(g).toString();return d+"/collections/"+p.collectionName+"/documents/search?"+f}#w(m){let S=m.name,y=m.message;return this.setError(S,y),this}#D(x){this.#t=x;let w=x?.message;if(void 0!==w)throw this.setError("typesenseSearchRequestResponse",w),Error();return!1===x.ok&&alert("hmmm"),this}#v($){let v=this.#D.bind(this);return $.json().then(v)}abort(){if(!0===this.#p)return!1;this.#p=!0;let e=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.abort");return this.setError("abort",e),this.#o.abort(),!0}fetch(){let e=this.#C(),t=this.#A();return this.#u(e,t)}getError(){return this.#q}getOptions(){return this.#r}getQuery(){return this.#s}getResponse(){return this.#t}getSearchOptions(){let e=this.#x(),t=Object.assign({},this.#r);for(let n in t.preset=e.presetName||null,t)null===t[n]&&delete t[n];return t}setError(e,t){return null===this.#q&&(this.#q={},this.#q.key=e,this.#q.message=t,!0)}setOptions(e){return this.#r=Object.assign({},this.#r,this.getHelper("config").get("searchOptions"),e),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.CacheUtils=window.annexSearch.CacheUtils||class{static #e={};static get(e){let t=this.#e[e];if(void 0!==t)return t}static set(e,t){return this.#e[e]=t,!0}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.DataUtils=window.annexSearch.DataUtils||class{static deepMerge(e,t){let n={...e};for(let r in t)t.hasOwnProperty(r)&&(t[r]&&"object"==typeof t[r]&&!Array.isArray(t[r])?n[r]&&"object"==typeof n[r]&&!Array.isArray(n[r])?n[r]=this.deepMerge(n[r],t[r]):n[r]=this.deepMerge({},t[r]):n[r]=t[r]);return n}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.DebuggingUtils=window.annexSearch.DebuggingUtils||class{static log(){if(!1===this.getHelper("config").get("debug"))return!1;let e=window.annexSearch.LoggingUtils.debug.apply(window.annexSearch.LoggingUtils,arguments);return e}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.ElementUtils=window.annexSearch.ElementUtils||class{static #E(e,t){let n=t.getHelper("config").get("templates")[e],r=new DOMParser,s=r.parseFromString(n,"text/html"),i;return n=s.querySelector("script[type]").textContent.trim(),i=(s=r.parseFromString(n,"text/html")).body.firstElementChild}static getEscapedHTML(e){return e.replace(/&(?!(?:[a-z\d]+|#\d+|#x[a-f\d]+);)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static getValueFromPath(e,t){let n=e.split("."),r=t;for(let s of n){if(r&&"object"==typeof r&&s in r){r=r[s];continue}return null}return null==r||""===(r=r.trim())?null:r=String(r)}static renderTemplate(e,t,n=null){n=n||t.getRootNode().host;let r=this.#E(e,n);t.appendChild(r);let s=r.getAttribute("data-view-name"),i=new window.annexSearch[s](r);return r.data=r.data||{},r.data.view=i,i.render(),i}static renderTemplateVariables(e,t){return e=e.replace(/\{\{([^}]+)\}\}/g,function(e,n){if(!0===n.includes("||")){let r=n.split("||").map(function(e){return e.trim()});for(let s of r){let i=window.annexSearch.ElementUtils.getValueFromPath(s,t);if(null!==i)return window.annexSearch.ElementUtils.getEscapedHTML(i)}return""}n=n.trim();let a=window.annexSearch.ElementUtils.getValueFromPath(n,t);return null===a?"":a=window.annexSearch.ElementUtils.getEscapedHTML(a)})}static waitForAnimation(){return new Promise(function(e,t){window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e()})})})}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.ErrorUtils=window.annexSearch.ErrorUtils||class{static #F={"configHelper.get.key.invalid":"Invalid {key} value passed to {base.configHelper.get}; found {%0}","configHelper.set.key.undefined":"Invalid {key} value passed to {base.configHelper.set}; found {undefined}","configHelper.set.value.undefined":"Invalid {value} value passed to {base.configHelper.set}; found {undefined}","interactionUtils.zeroRegistered":"No registered $annexSearchWidget elements found","interactionUtils.multipleRegistered":"Multiple registered $annexSearchWidget elements found. Unable to determine which $element is the target.","loggingUtils.fetchFailed.tip":"Tip: Double check that {config.cluster.hostname} is defined and correct","loggingUtils.typesenseFailed.tip":"Tip: Double check that {config.cluster.apiKey} and {config.cluster.collectionName} are defined and correct","stylesheets.failedLoading":"Could not load stylesheets","typesenseSearchRequest.abort":"Abort method called against {window.annexSearch.TypesenseSearchRequest}","typesenseHelper.options.q.empty":"Invalid {q} value; found {empty string}","typesenseHelper.options.q.null":"Invalid {q} value; found {null}","typesenseHelper.options.q.undefined":"Invalid {q} value; found {undefined}","typesenseHelper.searchOptions.query_by.null":"Invalid {config.searchOptions.query_by} value; found {null}. Either {config.searchOptions.query_by} or {config.cluster.presetName} needs to be defined.","typesenseHelper.searchOptions.query_by.undefined":"Invalid {config.searchOptions.query_by} value; found {undefined}. Either {config.searchOptions.query_by} or {config.cluster.presetName} needs to be defined."};static getMessage(e,...t){let n=this.#F[e];if(void 0===n)return null;for(let r=0;r<t.length;r++)n=n.replace(RegExp(`%${r}`,"g"),t[r]);return n}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.FunctionUtils=window.annexSearch.FunctionUtils||class{static debounce(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(function(){e.apply(this,r)},t)}}static getEmptyPromise(){let e=Array.from(arguments);return new Promise(function(t,n){t.apply(window,e)})}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.InteractionUtils=window.annexSearch.InteractionUtils||class{static #G(){let e=document.body||document.head||document.documentElement,t=this.#H.bind(this);return e.addEventListener("click",t),!0}static #I(n){if(!1===this.#J(n,"data-annex-search"))return!1;let r=n.target.getAttribute("data-annex-search"),s=window.annexSearch.AnnexSearch.getRegistered()[0];return("inline"!==s.getConfig("layout")||"clear"===r||"focus"===r)&&!1!==["clear","focus","hide","show","toggle"].includes(r)&&("clear"===r?s.clear():"focus"===r?s.focus():"hide"===r?s.hide():"show"===r?s.show():"toggle"===r&&s.toggle())}static #H(i){return!0===this.#I(i)||!0===this.#K(i)}static #K(a){if(!1===this.#J(a,"data-annex-search-query"))return!1;let o=a.target.getAttribute("data-annex-search-query"),l=window.annexSearch.AnnexSearch.getRegistered()[0];return l.show(),l.query(o),!0}static #J(h,u){let c=h.target||null;if(null===c||!1===c.matches("["+u+"]"))return!1;h.preventDefault();let d=window.annexSearch.AnnexSearch.getRegistered();if(0===d.length){let p=window.annexSearch.ErrorUtils.getMessage("interactionUtils.zeroRegistered");return window.annexSearch.LoggingUtils.error(p),!1}if(d.length>1){let g=window.annexSearch.ErrorUtils.getMessage("interactionUtils.multipleRegistered");return window.annexSearch.LoggingUtils.error(g),!1}let f=c.getAttribute(u);return null!=f&&""!==(f=f.trim())}static setup(){return this.#G(),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.KeyboardShortcutUtils=window.annexSearch.KeyboardShortcutUtils||class{static #L={documentCatchAll:!0,documentDelete:!0,documentPaste:!0,documentEscape:!0,documentKeyboardNavigation:!0,documentKeyboardShortcut:!0,documentSelectAll:!0,documentSlash:!0,fieldEnter:!0,fieldEscape:!0};static #M(){let e=this.#N.bind(this);return document.addEventListener("paste",e),!0}static #O(){let t=this.#P.bind(this);return document.addEventListener("keydown",t),!0}static #Q(){return window.annexSearch.AnnexSearch.getActive()}static #R(){return window.annexSearch.AnnexSearch.getRegistered()}static #S(){return this.#Q().getView("root").getView("header.field")}static #T(){return this.#Q().getView("root").getView("body.results.found")}static #U(n){if(!1===this.#L.documentCatchAll)return!1;let r=this.#Q();if(null===r||!1===r.showing()||!0===n.metaKey||!0===n.ctrlKey)return!1;let s=n.key;if(s.length>1||" "===s)return!1;let i=r.shadow.activeElement,a=this.#S(),o=this.#T();return null===i?(a.focus(),a.clear(),a.nullifyLastTypesenseSearchResponse(),a.append(s),o.smoothScrollToTop(),o.resetFocusedIndex(),a.first("input").dispatchEvent(new Event("input",{bubbles:!0,shiftKey:n.shiftKey})),!0):!0!==i.matches("input")&&(a.focus(),a.clear(),a.nullifyLastTypesenseSearchResponse(),a.append(s),o.smoothScrollToTop(),o.resetFocusedIndex(),a.first("input").dispatchEvent(new Event("input",{bubbles:!0,shiftKey:n.shiftKey})),!0)}static #V(l){if(!1===this.#W(l,"documentDelete","backspace"))return!1;let h=this.#Q().shadow.activeElement,u=this.#S(),c=this.#T();return null===h?(u.focus(),u.decrement(),u.nullifyLastTypesenseSearchResponse(),c.smoothScrollToTop(),c.resetFocusedIndex(),u.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0):!0!==h.matches("input")&&(u.focus(),u.decrement(),u.nullifyLastTypesenseSearchResponse(),c.smoothScrollToTop(),c.resetFocusedIndex(),u.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0)}static #X(d){if(!1===this.#W(d,"documentEscape","escape"))return!1;let p=this.#Q().shadow.activeElement;return null===p?(this.#S().focus(),!0):!0!==p.matches("input")&&(this.#S().focus(),!0)}static #Y(g){if(!1===this.#W(g,"documentKeyboardNavigation",["tab","arrowdown","arrowup"]))return!1;let f=g.key.toLowerCase();g.preventDefault();let m="previous";"arrowdown"===f&&(m="next"),"tab"===f&&!1===g.shiftKey&&(m="next");let S=this.#T();return"next"===m?(S.next(),!0):(S.previous()||this.#Q().getView("root").focus(),!0)}static #Z(y){if(!1===this.#L.documentKeyboardShortcut)return!1;let x=this.#R();for(let w of x){if("inline"===w.getConfig("layout"))continue;let $=w.getHelper("config").get("keyboardShortcut");if(null==$||"⌘"!==($=$.trim().toLowerCase()).charAt(0))continue;let v=$.charAt(1),b=navigator.platform.toUpperCase().indexOf("MAC")>=0;if(b&&y.metaKey&&y.key.toLowerCase()===v||!b&&y.ctrlKey&&y.key.toLowerCase()===v)return y.preventDefault(),w.toggle(),!0}return!1}static #N(E){if(0===this.#R().length||null===this.#Q())return!1;let T=this.#Q();if(!1===T.showing()||!1===this.#L.documentPaste)return!1;let V=E.clipboardData.getData("text");if(0===V.length||0===(V=V.trim()).length)return!1;let C=T.shadow.activeElement,L=this.#S(),_=this.#T();return null===C?(L.focus(),L.clear(),L.nullifyLastTypesenseSearchResponse(),L.append(V),_.smoothScrollToTop(),_.resetFocusedIndex(),L.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0):!0!==C.matches("input")&&(L.focus(),L.clear(),L.nullifyLastTypesenseSearchResponse(),L.append(V),_.smoothScrollToTop(),_.resetFocusedIndex(),L.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0)}static #$(R){if(!1===this.#W(R,"documentSelectAll","a")||!1===R.metaKey)return!1;let U=this.#S();return U.focus(),U.select(),!0}static #_(H){if(!1===this.#W(H,"documentSlash","/"))return!1;let A=this.#Q().shadow.activeElement,B=this.#S();return null===A?(B.focus(),!0):!0!==A.matches("input")&&(B.focus(),!0)}static #aa(F){if(!1===this.#W(F,"fieldEnter","enter"))return!1;let D=this.#Q().shadow.activeElement;if(null===D)return!1;if(!0===D.matches("input")){let K=this.#T();if(null===K.getFocusedIndex()){let q=K.getResults()[0];return void 0!==q&&(F.stopPropagation(),q.focus(),q.simulateClick(F),!0)}}return!1}static #ab(I){if(!1===this.#W(I,"fieldEscape","escape"))return!1;let M=this.#Q(),k=M.shadow.activeElement;if(null===k)return!1;if(!0===k.matches("input")){I.preventDefault(),I.stopPropagation();let W=k.value.trim(),O=this.#T();if(""===W)return M.hide(),!0;let N=this.#S();return N.clear(),N.nullifyLastTypesenseSearchResponse(),O.clearResults(),O.setStateKey("idle"),M.dispatchCustomEvent("results.idle"),!0}return!1}static #P(P){return 0!==this.#R().length&&(!0===this.#Z(P)||!0===this.#Y(P)||!0===this.#X(P)||!0===this.#ab(P)||!0===this.#aa(P)||!0===this.#_(P)||!0===this.#$(P)||!0===this.#V(P)||(this.#U(P),!0))}static #W(j,Y,z){if(0===this.#R().length)return!1;let G=this.#Q();if(null==G||!1===G.showing()||!1===this.#L[Y])return!1;z=[].concat(z);let X=j.key.toLowerCase();return!1!==z.includes(X)}static setup(){return this.#M(),this.#O(),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.LoggingUtils=window.annexSearch.LoggingUtils||class{static #ac={error:"Annex Search"};static error(){let e="%c["+this.#ac.error+"]",t=[];return t.push(e),t.push("color: red; font-weight: bold; font-family: monospace;"),t=t.concat(Array.from(arguments)),window.console&&window.console.log&&window.console.log.apply(window,t),!0}static logFailedTypesenseSearchRequestError(e){let t=e.getError(),n=t.key,r=t.message;return(this.error("Could not complete Typesense search request"),"typesenseSearchRequestResponse"===n)?(this.error("Typesense response: "+r),!0===r.includes("Forbidden - a valid `x-typesense-api-key` header must be sent.")&&(r=window.annexSearch.ErrorUtils.getMessage("loggingUtils.typesenseFailed.tip"),this.error(r)),!0):(this.error("Error: "+r),!0===r.includes("Failed to fetch")&&(r=window.annexSearch.ErrorUtils.getMessage("loggingUtils.fetchFailed.tip"),this.error(r)),!0)}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.StringUtils=window.annexSearch.StringUtils||class{static generateUUID(){let e="",t,n;for(t=0;t<36;t++)8===t||13===t||18===t||23===t?e+="-":14===t?e+="4":19===t?e+=(3&(n=16*Math.random()|0)|8).toString(16):e+=(n=16*Math.random()|0).toString(16);return e}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.BaseView=window.annexSearch.BaseView||class extends window.annexSearch.Base{_$element=null;constructor(e){super(),this._$element=e}_addEvents(){return!1}find(e){return Array.from(this._$element.querySelectorAll(e))}first(e){return this._$element.querySelector(e)}getElement(){return this._$element}removeAttribute(e){return this._$element.removeAttribute(e),!0}render(){return this._addEvents(),!0}setAttribute(e,t){return this._$element.setAttribute(e,t),!0}setView(e,t){let n=this.get("views");return void 0===n&&(n={}),n[e]=t,this.set("views",n),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.BodyView=window.annexSearch.BodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ad(){let e=window.annexSearch.ElementUtils.renderTemplate("errorBody",this._$element);return this.setView("error",e),!0}#ae(){let t=window.annexSearch.ElementUtils.renderTemplate("idleBody",this._$element);return this.setView("idle",t),!0}#af(){let n=window.annexSearch.ElementUtils.renderTemplate("resultsBody",this._$element);return this.setView("results",n),!0}render(){return this.#ad(),this.#ae(),this.#af(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ErrorBodyView=window.annexSearch.ErrorBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ag(){let e=this.getHelper("config").get("copy").error.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#ag(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.IdleBodyView=window.annexSearch.IdleBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ag(){let e=this.getHelper("config").get("copy").idle.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#ag(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.EmptyResultsBodyView=window.annexSearch.EmptyResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ag(){let e=this.getHelper("config").get("copy").empty.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#ag(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FoundResultsBodyView=window.annexSearch.FoundResultsBodyView||class extends window.annexSearch.BaseView{#ah=null;#ai=[];#aj=60;#ak=.65;constructor(e){super(e)}#al(){let e=this._$element,t=this.#am.bind(this),n=this.#aj,r=window.annexSearch.FunctionUtils.debounce(t,n);return e.addEventListener("scroll",r),!0}#an(s){let i=window.annexSearch.ElementUtils.renderTemplate("resultFoundResultsBody",this._$element);return i.set("hit",s),this.#ai.push(i),i.render(),!0}#am(a){let o;return!(this._$element.scrollTop+this._$element.clientHeight<this._$element.scrollHeight*this.#ak)&&(this.getView("root.header.field").loadMore(),!0)}_addEvents(){return this.#al(),!0}clearResults(){for(this.#ai=[];this._$element.firstChild;)this._$element.removeChild(this._$element.firstChild);return this.scrollToTop(),!0}containsScrollbar(){let e=this._$element;return e.scrollHeight>e.clientHeight}drawResults(e){let t=e.hits||[];if(0===t.length)return!1;for(var n of t)this.#an(n);return!0}getFocusedIndex(){return this.#ah}getResults(){return this.#ai}next(){if(0===this.#ai.length)return!1;if(null===this.#ah)return this.#ah=0,this.#ai[this.#ah].focus(),!0;return this.#ah!==this.#ai.length-1&&(++this.#ah,this.#ai[this.#ah].focus(),!0)}previous(){return 0!==this.#ai.length&&null!==this.#ah&&(0===this.#ah?(this.#ah=null,!1):(--this.#ah,this.#ai[this.#ah].focus(),!0))}resetFocusedIndex(){return this.setFocusedIndex(null)}setFocusedIndex(e){return this.#ah=e,!0}setFocusedIndexByResultView(e){let t=this.#ai.indexOf(e);return this.setFocusedIndex(t),!0}scrollToTop(){let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.scrollTop=0}),!0}smoothScrollToTop(){let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.scrollTo({top:0,behavior:"smooth"})}),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ResultFoundResultsBodyView=window.annexSearch.ResultFoundResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ao(){let e=this._$element,t=this.#ap.bind(this);return e.addEventListener("click",t),!0}#aq(){let n=this._$element,r=this.#ar.bind(this);return n.addEventListener("focus",r),!0}#ap(s){let i=this.get("hit");return this.getWebComponent().dispatchCustomEvent("result.click",{event:s,hit:i}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}#ar(a){let o=this.get("hit");return this.getWebComponent().dispatchCustomEvent("result.focus",{event:a,hit:o}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}#as(){let l=this._$element.outerHTML,h=this.get("hit");return l=window.annexSearch.ElementUtils.renderTemplateVariables(l,{hit:h}),l=this.getHelper("typesense").replaceHightlightTags(l),this._$element=this.#at(l),!0}#at(u){let c=document.createElement("template");c.innerHTML=u.trim();let d=c.content.firstChild,p=this._$element.data||{};return this._$element.replaceWith(d),d.data=p,d}#au(){let g=this.getView("root.body.results.found").getResults().indexOf(this);return this.setAttribute("data-index",g),!0}_addEvents(){return this.#ao(),this.#aq(),!0}focus(){return this._$element.focus(),this._$element.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),!0}render(){return void 0!==this.get("hit")&&(this.#as(),this.#au(),super.render(),!0)}simulateClick(e){let t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,shiftKey:e.shiftKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey});return this._$element.dispatchEvent(t),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ResultsBodyView=window.annexSearch.ResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#av(){let e=window.annexSearch.ElementUtils.renderTemplate("emptyResultsBody",this._$element);return this.setView("empty",e),!0}#aw(){let t=window.annexSearch.ElementUtils.renderTemplate("foundResultsBody",this._$element);return this.setView("found",t),!0}render(){return this.#av(),this.#aw(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ToastView=window.annexSearch.ToastView||class extends window.annexSearch.BaseView{#ax=5e3;#ay=null;#az="(message)";#aA="(title)";constructor(e){super(e)}#ao(){let e=this._$element,t=this.#ap.bind(this);return e.addEventListener("click",t),!0}#aB(){return this._$element.remove(),!0}#aC(){let n=this.getWebComponent().getToasts();for(let r of n)r!==this&&r.hide();return!0}#ap(s){return this.hide(),!0}#aD(){let i,a=setTimeout(this.hide.bind(this),this.#ax);return this.#ay=a,!0}_addEvents(){return null!==this.#aA&&(this.#ao(),!0)}hide(){this._$element.classList.remove("visible"),clearTimeout(this.#ay);var e=this.#aB.bind(this);return this._$element.addEventListener("transitionend",e),!0}setHideTimeoutDuration(e=null){return this.#ax=e||this.#ax,!0}setMessage(e){return this.first(".message").innerHTML=e,!0}setTitle(e){return this.first(".title").innerHTML=e,!0}show(){this.#aC(),this.#aD();let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.classList.add("visible")}),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.BrandingBarFooterView=window.annexSearch.BrandingBarFooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FooterView=window.annexSearch.FooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aE(){let e=window.annexSearch.ElementUtils.renderTemplate("brandingBarFooter",this._$element);return this.setView("brandingBar",e),!0}#aF(){let t=window.annexSearch.ElementUtils.renderTemplate("statusBarFooter",this._$element);return this.setView("statusBar",t),!0}render(){return this.#aE(),this.#aF(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.StatusBarFooterView=window.annexSearch.StatusBarFooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ag(){let e=this.getHelper("config").get("copy").statusBar.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#ag(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FieldHeaderView=window.annexSearch.FieldHeaderView||class extends window.annexSearch.BaseView{#aG=null;#aH=!1;#aI=60;#aJ=null;constructor(e){super(e)}#aK(){let e=this.#aL.bind(this);return this.first("input").addEventListener("input",e),!0}#aM(){let t=this.getHelper("config").get("keyboardShortcut");return null===t?null:t=t.trim().toLowerCase()}#aN(n,r){let s=r.getError();if("abort"===s.key)return!1;this.getWebComponent().dispatchCustomEvent("results.error",{error:s});this.getView("root.header").hideSpinner();let i=r.getResponse();return this.#aG=i,this.setStateKey("error"),window.annexSearch.LoggingUtils.logFailedTypesenseSearchRequestError(r),!0}#aL(a){let o=this.first("input").value.trim();return""===o?(this.nullifyLastTypesenseSearchResponse(),this.clear(),this.setStateKey("idle"),this.getWebComponent().dispatchCustomEvent("results.idle"),!1):o!==this.#aG?.request_params?.q&&(this.nullifyLastTypesenseSearchResponse(),this.#aH=!1,this.getView("root.body.results.found").scrollToTop(),clearTimeout(this.#aJ),this.#aJ=setTimeout(this.#aO.bind(this),this.#aI),!0)}#aP(l,h){let u=h.getResponse();return this.getWebComponent().dispatchCustomEvent("results.loaded",{response:u}),this.#aG=u,this.#aH=!1,0!==u.hits.length&&(this.getView("root.body.results.found").drawResults(u),this.#aQ(),!0)}#aR(c,d){let p=d.getResponse();if(!0===this.#aH){let g=this.#aP(c,d);return!0===this.getView("root.body.results.found").containsScrollbar()||(this.loadMore(),g)}if(this.#aG=p,this.getView("root.body.results.found").clearResults(),0===p.hits.length)return this.getWebComponent().dispatchCustomEvent("results.empty"),this.setStateKey("empty"),!1;this.getWebComponent().dispatchCustomEvent("results.loaded",{response:p}),this.setStateKey("results");let f=this.getView("root.body.results.found");return f.drawResults(p),f.resetFocusedIndex(),this.#aQ(),!0===f.containsScrollbar()||(this.loadMore(),!0)}#aS(m={},S){if(null===S.getError())return this.getView("root.header").hideSpinner(),this.#aR(m,S);return this.#aN(m,S)}#aO(y={}){this.getView("root.header").showSpinner();let x=this.first("input").value.trim(),w=this.#aS.bind(this,y);return this.getHelper("typesense").search(x,y).then(w)}#aT(){let $=this.getHelper("config").get("copy").placeholder;return null!=$&&(this.first("input").setAttribute("placeholder",$),!0)}#aU(){let v=this.#aM();return null!==v&&(this.first(".label").innerHTML=v.toUpperCase(),!0)}#aQ(){let b=this.#aG,E=this.getView("root.header.metaBar");return E.set("typesenseSearchResponse",b),E.render(),!0}_addEvents(){return this.#aK(),!0}append(e){let t=this.first("input");return t.value=t.value+e,!0}blur(){return this.first("input").blur(),!0}clear(){return this.first("input").value="",!0}nullifyLastTypesenseSearchResponse(){return this.#aG=null,!0}decrement(){let e=this.first("input");return e.value=e.value.slice(0,-1),!0}focus(){let e=this.first("input");return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.focus()}),!0}loadMore(){if(!0===this.#aH)return!1;this.#aH=!0;if(this.getView("root.body.results.found").getResults().length>=this.#aG.found)return!1;let e=this.#aG?.page??null;if(null===e)return!1;e=parseInt(e,10),++e;let t={};return t.page=e,this.#aO(t),!0}render(){return super.render(),this.#aT(),this.#aU(),!0}select(){let e=this.first("input");return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.select()}),!0}setCaret(){let e=this.first("input"),t=e.value;return e.setSelectionRange(t.length,t.length),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.HeaderView=window.annexSearch.HeaderView||class extends window.annexSearch.BaseView{#aV=!1;constructor(e){super(e)}#ao(){let e=this.#ap.bind(this);return this._$element.addEventListener("click",e),!0}#aW(){let t=this.#aX.bind(this);return this.first(".hide").addEventListener("click",t),!0}#aY(){let n=window.annexSearch.ElementUtils.renderTemplate("fieldHeader",this._$element);return this.setView("field",n),!0}#aZ(){let r=window.annexSearch.ElementUtils.renderTemplate("metaBarHeader",this._$element);return this.setView("metaBar",r),!0}#ap(s){let i;return s.target!==this.first(".hide")&&(this.focus(),!0)}#aX(a){return this.hideWebComponent(),!1}_addEvents(){return this.#ao(),this.#aW(),!0}blur(){return this.getView("field").blur()}focus(){return this.getView("field").focus()}render(){return this.#aY(),this.#aZ(),super.render(),!0}hideSpinner(){return!1!==this.#aV&&(this.#aV=!1,this.getView("root").setAttribute("data-searching","0"),!0)}showSpinner(){return!0!==this.#aV&&(this.#aV=!0,this.getView("root").setAttribute("data-searching","1"),!0)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.MetaBarHeaderView=window.annexSearch.MetaBarHeaderView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#a$(){let e=this.get("typesenseSearchResponse"),t=this.getView("root.body.results.found").getResults().length;return this.first(".showing").innerHTML=t,this.first(".found").innerHTML=e.found,!0}render(){return void 0!==this.get("typesenseSearchResponse")&&(this.#a$(),!0)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.RootView=window.annexSearch.RootView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#a_(){let e=this._$element,t=this.#a0.bind(this);return e.addEventListener("click",t),!0}#a1(){let n=this.first(".content"),r=window.annexSearch.ElementUtils.renderTemplate("body",n);return this.setView("body",r),!0}#a2(){let s=this.first(".content"),i=window.annexSearch.ElementUtils.renderTemplate("footer",s);return this.setView("footer",i),!0}#a3(){let a=this.first(".content"),o=window.annexSearch.ElementUtils.renderTemplate("header",a);return this.setView("header",o),!0}#a0(l){return l.target===this._$element&&(this.getWebComponent().hide(),!0)}_addEvents(){return this.#a_(),!0}blur(){return this.getView("header").blur()}focus(){return this.getView("header").focus()}render(){return this.#a3(),this.#a1(),this.#a2(),super.render(),this.setStateKey("idle"),this.getWebComponent().dispatchCustomEvent("results.idle"),!0}setStateKey(e){return this._$element.setAttribute("data-state-key",e),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.AnnexSearchWidgetWebComponent=window.annexSearch.AnnexSearchWidgetWebComponent||class extends HTMLElement{#a4={};#a5=null;#a6=2147483647;#a7=!1;#a8=!1;#a9=[];#ba=null;#bb={};constructor(){super(),window.test=this,this.#a5=window.annexSearch.AnnexSearch.getRegistered().length,window.annexSearch.AnnexSearch.register(this),this.#bc(),this.#bd(),this.#be(),this.#bf()}#bg(e,t){let n=new CustomEvent(e,{detail:t});return console.log(n.detail),this.dispatchEvent(n),!0}#bh(){return this.#a6,this.#a5,!0}#bi(){let r=this.shadow,s=window.annexSearch.ElementUtils.renderTemplate("root",r,this),i=this.getConfig("layout"),a=String(+this.getConfig("showOverlay")),o=this.#a5;if("inline"===this.getConfig("layout")&&(a=0),this.#bb.root=s,this.setAttribute("id",this.#ba),this.setAttribute("data-annex-search-layout",i),this.setAttribute("data-annex-search-overlay",a),this.setAttribute("data-annex-search-ready","1"),this.setAttribute("data-annex-search-index",o),this.setAttribute("data-annex-search-open","0"),null!==this.getConfig("name")){let l=this.getConfig("name");this.setAttribute("data-annex-search-name",l)}return"inline"===this.getConfig("layout")&&this.show(),!0}#bf(){let h=this.getHelper("config"),u=this.#bi.bind(this);return h.loadStylesheets(this).then(h.loadTemplates.bind(h)).then(u).catch(function(e){console.log(e)})}#bd(){return this.#a4.config=new window.annexSearch.ConfigHelper,this.#a4.typesense=new window.annexSearch.TypesenseHelper,!0}#bc(){return this.shadow=this.attachShadow({mode:"closed"}),!0}#be(){return this.#ba=window.annexSearch.StringUtils.generateUUID(),!0}clear(){let e=this.getView("root").getView("root.header.field"),t=this.getView("root").getView("body.results.found");return e.focus(),e.clear(),e.nullifyLastTypesenseSearchResponse(),t.resetFocusedIndex(),e.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0}dispatchCustomEvent(e,...t){let n=this.getConfig("callbacks")||{},r=e.split(".");for(var s of r)if(null===(n=n[s]??null))return!1;return this.#bg(e,t.slice()),t.unshift(this),n.apply(window,t),!0}focus(){return this.getView("root").focus()}getConfig(e){return this.getHelper("config").get(e)}getHelper(e){return this.#a4[e]}getToasts(){return this.#a9}getView(e){return this.#bb[e]}hide(){return"inline"!==this.getConfig("layout")&&!1!==this.#a8&&(window.annexSearch.AnnexSearch.clearActive(),this.dispatchCustomEvent("root.hide"),this.#a8=!1,this.#bb.root.blur(),this.setAttribute("data-annex-search-open","0"),this.setAttribute("inert",""),!0)}mount(e=null){if(null===(e=e||this.getConfig("$container")||null)){if("inline"===this.getConfig("layout"))return!1;e=document.body||document.head||document.documentElement}return e.appendChild(this),this.#a7=!0,!0}query(e){let t=this.getView("root").getView("root.header.field"),n=this.getView("root").getView("body.results.found");return t.focus(),t.clear(),t.nullifyLastTypesenseSearchResponse(),t.append(e),n.smoothScrollToTop(),n.resetFocusedIndex(),window.annexSearch.ElementUtils.waitForAnimation().then(function(){t.setCaret()}),t.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0}ready(){if(!1===this.#a7)return new Promise(function(e,t){t()});let e=this;return null===this.getAttribute("data-annex-search-ready")?new Promise(function(t,n){let r=setInterval(function(){null!==e.getAttribute("data-annex-search-ready")&&(clearInterval(r),t(e))},10)}):new Promise(function(e,t){e()})}setConfig(e,t){return"object"==typeof e?this.getHelper("config").setData(e):this.getHelper("config").set(e,t)}show(){if(!0===this.#a8)return!1;window.annexSearch.AnnexSearch.setActive(this),this.dispatchCustomEvent("root.show"),this.#a8=!0,this.#bh(),this.setAttribute("data-annex-search-open","1"),this.removeAttribute("inert");let e=this.#bb.root.getView("root.body.results.found"),t=e.getResults();if(0===t.length)return this.#bb.root.focus(),!0;let n=e.getFocusedIndex();null===n&&(n=0);let r=t[n];return void 0===r||(r.focus(),!0)}showing(){return this.#a8}showToast(e,t,n=null){let r=this.shadow,s=window.annexSearch.ElementUtils.renderTemplate("toast",r);return this.#a9.push(s),s.setHideTimeoutDuration(n),s.setMessage(t),s.setTitle(e),s.show(),!0}toggle(){return(this.dispatchCustomEvent("root.toggle"),!0===this.#a8)?this.hide():this.show()}}}),window.annexSearch.DependencyLoader.load(function(){window.annexSearch.AnnexSearch.setup()});