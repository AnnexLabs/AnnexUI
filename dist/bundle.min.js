window.annexSearch=window.annexSearch||{},window.annexSearch.DependencyLoader=function(){let e=[],t=0,n=function(e,n){return++t,s(e),!0===r(e)&&(n.apply(window.annexSearch.DependencyLoader),!0)},s=function(e){if(t>1e4){let n="Could not complete an attempt: [";throw n+=e.join(", ")+"]",window.annexSearch&&window.annexSearch.LoggingUtils&&window.annexSearch.LoggingUtils.error(n),Error(n)}},r=function(e){let t=0,n=e.length;for(;t<n;++t)if(!1===i(e[t]))return!1;return!0},i=function(e){let t=e.split("."),n=window;for(var s of t){if(void 0===n[s])return!1;n=n[s]}return!0};return{load:function(n){n=n||function(){};let s;for(;e.length>0;)!1===(s=e.shift()).apply(window.annexSearch.DependencyLoader)&&e.push(s);n(t)},push:function(t,s){"string"==typeof t&&(t=[t]);let r=[t,s],i=function(){return n.apply(window.annexSearch.DependencyLoader,r)};return e.push(i),!0}}}(),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.AnnexSearch=window.annexSearch.AnnexSearch||class{static #a=null;static #b=[];static #c="v0.1.0-dev";static #d(){for(var e in window.annexSearch)!1!==window.annexSearch.hasOwnProperty(e)&&"function"==typeof window.annexSearch[e]&&"BaseUtils"!==e&&!1!==e.endsWith("Utils")&&window.annexSearch[e].setup&&window.annexSearch[e].setup();return!0}static clearActive(){return this.#a=null,!0}static getActive(){return this.#a}static getRegistered(){return this.#b}static getShowing(){let e=this.#b,t=[];for(let n of e)!0===n.showing()&&t.push(n);return t}static getVersion(){return this.#c}static register(e){return this.#b.push(e),!0}static setActive(e){return this.#a=e,!0}static setup(){return this.#d(),window.customElements.define("annex-search-widget",window.annexSearch.AnnexSearchWidgetWebComponent),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.Base=window.annexSearch.Base||class{#e={};constructor(){}error(){let e=window.annexSearch.LoggingUtils,t=window.annexSearch.LoggingUtils.error.apply(e,arguments);return t}get(e){return this.#e[e]||void 0}getHelper(e){return this.getWebComponent().getHelper(e)}getView(e){let t=(this.get("views")||{})[e]||void 0;if(void 0!==t)return t;if("root"===e)return this.getWebComponent().getView("root");let n=e.split(".");for(let s of(t=this.getWebComponent().getView("root"),n))"root"!==s&&(t=t.getView(s));return t}getWebComponent(){return this._$element?.getRootNode()?.host||window.annexSearch.AnnexSearch.getActive()}hideWebComponent(){return this.getWebComponent().hide(),!0}set(e,t){return this.#e[e]=t,!0}setStateKey(e){return this.getView("root").setStateKey(e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ConfigHelper=window.annexSearch.ConfigHelper||class extends window.annexSearch.BaseView{#e={$container:null,callbacks:{result:{click:function(e){},focus:function(e){}},results:{empty:function(e){},error:function(e){},idle:function(e){},loaded:function(e){}},root:{hide:function(e){},show:function(e){},toggle:function(e){}}},cluster:{apiKey:null,collectionName:null,hostname:null,presetName:null},copy:{empty:{message:"No results found..."},error:{message:"Something went wrong..."},idle:{message:"Start typing to begin your search..."},placeholder:"Search...",statusBar:{message:"Instantly search through 10,000+ results"}},debug:!0,keyboardShortcut:"âŒ˜k",highlightTagName:"MARK",layout:"modal",name:null,paths:{css:["https://website.com/v0.1.0-dev/bundle.min.css",],templates:"https://local.annexsearch.com/ts/templates"},schema:"webResource-v0.1.0",searchOptions:{highlight_full_fields:null,highlight_affix_num_tokens:null,snippet_threshold:null},searchRequestMethod:"lifo",showOverlay:!0,templates:{}};constructor(){super()}#f(e){let t=e.match(/<script\b[^>]*>[\s\S]*?<\/script>/gi);for(let n of t){let s=n.match(/data-template-id=["']([^"']+)["']/),r=s?s[1]:null;null!==r&&(this.#e.templates[r]=n)}return window.annexSearch.CacheUtils.set("templates",this.#e.templates),!0}#g(i,a){let o=window.annexSearch.ErrorUtils.getMessage("stylesheets.failedLoading");return window.annexSearch.LoggingUtils.error(o,a),i(),!0}#h(l){return window.annexSearch.ElementUtils.waitForAnimation().then(l),!0}#i(h){let c=h.shadow,u=this.#g.bind(this),d=this.#h.bind(this);return Promise.all(Array.from(new Set(this.get("paths").css)).map(function(e){return new Promise(function(t,n){let s=document.createElement("link");s.rel="stylesheet",s.href=e,s.onload=t,s.onerror=u.bind(null,n),c.appendChild(s)})})).then(function(){return new Promise(function(e){d(e)})})}#j(){let p=this.#f.bind(this);return fetch(this.#e.paths.templates).then(function(e){return e.text()}).then(p)}get(e){if(void 0===e)return this.#e;let t=this.#e[e];if(void 0!==t)return t;let n=e.split(".");if(1===n.length){let s=window.annexSearch.ErrorUtils.getMessage("configHelper.get.key.invalid",e);this.error(s);return}for(let r of(t=this.#e,n))if(void 0===(t=t[r])){let i=window.annexSearch.ErrorUtils.getMessage("configHelper.get.key.invalid",e);this.error(i);return}return t}loadStylesheets(e){return this.#i(e)}loadTemplates(){let e=window.annexSearch.CacheUtils.get("templates");return void 0===e?this.#j():(this.#e.templates=e,console.log("oh"),!0)}set(e,t){if(void 0===e){let n=window.annexSearch.ErrorUtils.getMessage("configHelper.set.key.undefined");return this.error(n),!1}if(void 0===t){let s=window.annexSearch.ErrorUtils.getMessage("configHelper.set.value.undefined");return this.error(s),!1}if(void 0===this.get(e))return!1;let r=this.#e,i=this.#e[e],a=e;if(void 0===i){let o=e.split(".");for(a of(i=this.#e,o))r=i,i=i[a]}return r[a]=t,!0}setData(e){return this.#e=window.annexSearch.DataUtils.deepMerge(this.#e,e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.TypesenseHelper=window.annexSearch.TypesenseHelper||class extends window.annexSearch.BaseView{#k=null;#l=[];constructor(){super()}#m(){if(null===this.#k)return!1;let e=this.#k;this.#k=null,e.abort();let t=this.#l.indexOf(e);return -1!==t&&(this.#l.splice(t,1),!0)}#n(n){let s=n.getOptions();if(null===s.q){let r=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.null");return n.setError("option",r),!1}if(void 0===s.q){let i=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.undefined");return n.setError("option",i),!1}if(""===s.q.trim()){let a=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.options.q.empty");return n.setError("option",a),!1}let o=n.getSearchOptions();if(o.preset)return!0;if(null===o.query_by){let l=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.searchOptions.query_by.null");return n.setError("searchOptions",l),!1}if(void 0===o.query_by){let h=window.annexSearch.ErrorUtils.getMessage("typesenseHelper.searchOptions.query_by.undefined");return n.setError("searchOptions",h),!1}return!0}getHighlightEndTag(){return"</"+this.getHelper("config").get("highlightTagName").toLowerCase()+">"}getHighlightStartTag(){return"<"+this.getHelper("config").get("highlightTagName").toLowerCase()+">"}replaceHightlightTags(e){let t=this.getHighlightStartTag(),n=this.getHighlightEndTag(),s=t.replace("<","&lt;").replace(">","&gt;"),r=n.replace("<","&lt;").replace(">","&gt;");return e=(e=e.replaceAll(s,t)).replaceAll(r,n)}search(e,t={}){this.#m();let n=new window.annexSearch.TypesenseSearchRequest(e);return(n.setOptions(t),!1===this.#n(n))?window.annexSearch.FunctionUtils.getEmptyPromise(n):(this.#k=n,this.#l.push(n),n.fetch())}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.TypesenseCollectionRequest=window.annexSearch.TypesenseCollectionRequest||class extends window.annexSearch.Base{constructor(e){super()}fetch(){let e={host:"your-typesense-host.com",port:443,protocol:"https",apiKey:"your-api-key"},t=`${e.protocol}://${e.host}:${e.port}`;async function n(n){try{let s=`${t}/collections/${n}`,r=await fetch(s,{method:"GET",headers:{"X-TYPESENSE-API-KEY":e.apiKey,"Content-Type":"application/json"}});if(!r.ok)throw Error(`HTTP error! status: ${r.status} - ${r.statusText}`);let i=await r.json();return i}catch(a){throw console.error("Error fetching collection details:",a),a}}async function s(){try{var e;let t=await n("products");console.log("Collection Details:",t),e=t,console.log(`
=== Collection: ${e.name} ===`),console.log(`Documents: ${e.num_documents}`),console.log(`Created: ${new Date(1e3*e.created_at).toLocaleDateString()}`),e.default_sorting_field&&console.log(`Default Sort: ${e.default_sorting_field}`),console.log("\nFields:"),e.fields.forEach(e=>{let t=e.optional?" (optional)":" (required)",n=e.facet?" [facetable]":"",s=!1!==e.index?" [indexed]":" [not indexed]";console.log(`  - ${e.name}: ${e.type}${t}${n}${s}`)})}catch(s){console.error("Failed to fetch collection:",s)}}function r(n){return new Promise((s,r)=>{let i=new XMLHttpRequest,a=`${t}/collections/${n}`;i.open("GET",a,!0),i.setRequestHeader("X-TYPESENSE-API-KEY",e.apiKey),i.setRequestHeader("Content-Type","application/json"),i.onreadystatechange=function(){if(4===i.readyState){if(i.status>=200&&i.status<300)try{let e=JSON.parse(i.responseText);s(e)}catch(t){r(Error("Failed to parse response JSON"))}else r(Error(`HTTP error! status: ${i.status}`))}},i.onerror=function(){r(Error("Network error occurred"))},i.send()})}return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.TypesenseSearchRequest=window.annexSearch.TypesenseSearchRequest||class extends window.annexSearch.Base{#o=null;#p=!1;#q=null;#r={page:1,per_page:10};#s=null;#t=null;constructor(e){super(),this.#s=e,this.#r.q=e,this.#r.highlight_end_tag=this.getHelper("typesense").getHighlightEndTag(),this.#r.highlight_start_tag=this.getHelper("typesense").getHighlightStartTag()}#u(e,t){let n=this.#v.bind(this),s=this.#w.bind(this);return window.fetch(e,t).then(n).catch(s)}#x(){return{hostname:this.getHelper("config").get("cluster.hostname"),protocol:"https",apiKey:this.getHelper("config").get("cluster.apiKey"),collectionName:this.getHelper("config").get("cluster.collectionName"),presetName:this.getHelper("config").get("cluster.presetName")}}#y(){let r=this.#x();return r.protocol+"://"+r.hostname}#z(){return{"X-TYPESENSE-API-KEY":this.#x().apiKey,"Content-Type":"application/json"}}#A(){let i=new AbortController,a=this.#z(),o={method:"GET",signal:i.signal,headers:a};return this.#o=i,o}#B(){let l=this.getSearchOptions(),h=new URLSearchParams(l);for(let[c,u]of h.entries())u||h.delete(c);return h}#C(){let d=this.#y(),p=this.#x(),g=this.#B(),f=new URLSearchParams(g).toString();return d+"/collections/"+p.collectionName+"/documents/search?"+f}#w(S){let m=S.name,x=S.message;return this.setError(m,x),this}#D(y){this.#t=y;let w=y?.message;if(void 0!==w)throw this.setError("typesenseSearchRequestResponse",w),Error();return!1===y.ok&&alert("hmmm"),this}#v($){let v=this.#D.bind(this);return $.json().then(v)}abort(){if(!0===this.#p)return!1;this.#p=!0;let e=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.abort");return this.setError("abort",e),this.#o.abort(),!0}fetch(){let e=this.#C(),t=this.#A();return this.#u(e,t)}getError(){return this.#q}getOptions(){return this.#r}getQuery(){return this.#s}getResponse(){return this.#t}getSearchOptions(){let e=this.#x(),t=Object.assign({},this.#r);for(let n in t.preset=e.presetName||null,t)null===t[n]&&delete t[n];return t}logFailedEvent(){let e=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.general");this.error(e);let t=this.getError();if("typesenseSearchRequestResponse"===t.key){let n=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.responseReceived",t.message);if(this.error(n),!0===n.includes("Could not find a field named")){let s=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.responseReceived.fieldTip");return this.error(s),!0}if(!0===n.includes("Forbidden - a valid `x-typesense-api-key` header must be sent.")){let r=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.responseReceived.forbiddenTip");return this.error(r),!0}if(!0===n.includes("No search fields specified")){let i=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.responseReceived.queryTip");this.error(i)}return!0}return e=window.annexSearch.ErrorUtils.getMessage("typesenseSearchRequest.failed.unknown",t.message),this.error(e),!0===e.includes("Failed to fetch")&&(e=window.annexSearch.ErrorUtils.getMessage("loggingUtils.fetchFailed.tip"),this.error(e)),!0}setError(e,t){return null===this.#q&&(this.#q={},this.#q.key=e,this.#q.message=t,!0)}setOptions(e){return this.#r=Object.assign({},this.#r,this.getHelper("config").get("searchOptions"),e),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.BaseUtils=window.annexSearch.BaseUtils||class{static #E=!1;static setup(){return null!=document&&("complete"===document.readyState||"interactive"===document.readyState)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.CacheUtils=window.annexSearch.CacheUtils||class extends window.annexSearch.BaseUtils{static #e={};static get(e){let t=this.#e[e];if(void 0!==t)return t}static set(e,t){return this.#e[e]=t,!0}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.DataUtils=window.annexSearch.DataUtils||class extends window.annexSearch.BaseUtils{static deepMerge(e,t){let n={...e};for(let s in t)t.hasOwnProperty(s)&&(t[s]&&"object"==typeof t[s]&&!Array.isArray(t[s])?n[s]&&"object"==typeof n[s]&&!Array.isArray(n[s])?n[s]=this.deepMerge(n[s],t[s]):n[s]=this.deepMerge({},t[s]):n[s]=t[s]);return n}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.ElementUtils=window.annexSearch.ElementUtils||class extends window.annexSearch.BaseUtils{static #F(e,t){let n=t.getHelper("config").get("templates")[e],s=new DOMParser,r=s.parseFromString(n,"text/html"),i;return n=r.querySelector("script[type]").textContent.trim(),i=(r=s.parseFromString(n,"text/html")).body.firstElementChild}static getEscapedHTML(e){return e.replace(/&(?!(?:[a-z\d]+|#\d+|#x[a-f\d]+);)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static getValueFromPath(e,t){let n=e.split("."),s=t;for(let r of n){if(s&&"object"==typeof s&&r in s){s=s[r];continue}return null}return null==s||""===(s=s.trim())?null:s=String(s)}static renderTemplate(e,t,n=null){n=n||t.getRootNode().host;let s=this.#F(e,n);t.appendChild(s);let r=s.getAttribute("data-view-name"),i=new window.annexSearch[r](s);return s.data=s.data||{},s.data.view=i,i.render(),i}static renderTemplateVariables(e,t){return e=e.replace(/\{\{([^}]+)\}\}/g,function(e,n){if(!0===n.includes("||")){let s=n.split("||").map(function(e){return e.trim()});for(let r of s){let i=window.annexSearch.ElementUtils.getValueFromPath(r,t);if(null!==i)return window.annexSearch.ElementUtils.getEscapedHTML(i)}return""}n=n.trim();let a=window.annexSearch.ElementUtils.getValueFromPath(n,t);return null===a?"":a=window.annexSearch.ElementUtils.getEscapedHTML(a)})}static waitForAnimation(){return new Promise(function(e,t){window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){e()})})})}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.ErrorUtils=window.annexSearch.ErrorUtils||class extends window.annexSearch.BaseUtils{static #G={"configHelper.get.key.invalid":"Invalid {key} value passed to {base.configHelper.get}; found {%0}","configHelper.set.key.undefined":"Invalid {key} value passed to {base.configHelper.set}; found {undefined}","configHelper.set.value.undefined":"Invalid {value} value passed to {base.configHelper.set}; found {undefined}","interactionUtils.zeroRegistered":"No registered $annexSearchWidget elements found","interactionUtils.multipleRegistered":"Multiple registered $annexSearchWidget elements found. Unable to determine which $element is the target.","loggingUtils.fetchFailed.tip":"Tip: Double check that {config.cluster.hostname} is defined and correct.","stylesheets.failedLoading":"Could not load stylesheets.","typesenseSearchRequest.abort":"Abort method called against {window.annexSearch.TypesenseSearchRequest}","typesenseHelper.options.q.empty":"Invalid {q} value; found {empty string}","typesenseHelper.options.q.null":"Invalid {q} value; found {null}","typesenseHelper.options.q.undefined":"Invalid {q} value; found {undefined}","typesenseHelper.searchOptions.query_by.null":"Invalid {config.searchOptions.query_by} value; found {null}. Either {config.searchOptions.query_by} or {config.cluster.presetName} needs to be defined.","typesenseHelper.searchOptions.query_by.undefined":"Invalid {config.searchOptions.query_by} value; found {undefined}. Either {config.searchOptions.query_by} or {config.cluster.presetName} needs to be defined.","typesenseSearchRequest.failed.general":"Could not complete Typesense search request.","typesenseSearchRequest.failed.responseReceived":"Typesense response: %0","typesenseSearchRequest.failed.responseReceived.fieldTip":"Tip: Double check that {config.searchOptions.query_by} is referencing valid collection fields.","typesenseSearchRequest.failed.responseReceived.forbiddenTip":"Tip: Double check that {config.cluster.apiKey} and {config.cluster.collectionName} are defined and correct.","typesenseSearchRequest.failed.responseReceived.queryTip":"Tip: Double check that, if defined, both {config.cluster.presetName} and/or {config.searchOptions.query_by} are correct.","typesenseSearchRequest.failed.unknown":"Error: %0"};static getMessage(e,...t){let n=this.#G[e];if(void 0===n)return null;for(let s=0;s<t.length;s++)n=n.replace(RegExp(`%${s}`,"g"),t[s]);return n}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.FunctionUtils=window.annexSearch.FunctionUtils||class extends window.annexSearch.BaseUtils{static debounce(e,t){let n;return function(...s){clearTimeout(n),n=setTimeout(function(){e.apply(this,s)},t)}}static getEmptyPromise(){let e=Array.from(arguments);return new Promise(function(t,n){t.apply(window,e)})}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.InteractionUtils=window.annexSearch.InteractionUtils||class extends window.annexSearch.BaseUtils{static #H(){let e=document.body||document.head||document.documentElement,t=this.#I.bind(this);return e.addEventListener("click",t),!0}static #J(n){if(!1===this.#K(n,"data-annex-search"))return!1;let s=n.target.getAttribute("data-annex-search"),r=window.annexSearch.AnnexSearch.getRegistered()[0];return("inline"!==r.getConfig("layout")||"clear"===s||"focus"===s)&&!1!==["clear","focus","hide","show","toggle"].includes(s)&&("clear"===s?r.clear():"focus"===s?r.focus():"hide"===s?r.hide():"show"===s?r.show():"toggle"===s&&r.toggle())}static #I(i){return!0===this.#J(i)||!0===this.#L(i)}static #L(a){if(!1===this.#K(a,"data-annex-search-query"))return!1;let o=a.target.getAttribute("data-annex-search-query"),l=window.annexSearch.AnnexSearch.getRegistered()[0];return l.show(),l.query(o),!0}static #K(h,c){let u=h.target||null;if(null===u||!1===u.matches("["+c+"]"))return!1;h.preventDefault();let d=window.annexSearch.AnnexSearch.getRegistered();if(0===d.length){let p=window.annexSearch.ErrorUtils.getMessage("interactionUtils.zeroRegistered");return window.annexSearch.LoggingUtils.error(p),!1}if(d.length>1){let g=window.annexSearch.ErrorUtils.getMessage("interactionUtils.multipleRegistered");return window.annexSearch.LoggingUtils.error(g),!1}let f=u.getAttribute(c);return null!=f&&""!==(f=f.trim())}static setup(){if(!0===super.setup())return this.#H(),!0;let e=window.annexSearch.InteractionUtils.setup.bind(window.annexSearch.InteractionUtils);return document.addEventListener("DOMContentLoaded",e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.KeyboardShortcutUtils=window.annexSearch.KeyboardShortcutUtils||class extends window.annexSearch.BaseUtils{static #M={documentCatchAll:!0,documentDelete:!0,documentPaste:!0,documentEscape:!0,documentKeyboardNavigation:!0,documentKeyboardShortcut:!0,documentSelectAll:!0,documentSlash:!0,fieldEnter:!0,fieldEscape:!0};static #N(){let e=this.#O.bind(this);return document.addEventListener("paste",e),!0}static #P(){let t=this.#Q.bind(this);return document.addEventListener("keydown",t),!0}static #R(){return window.annexSearch.AnnexSearch.getActive()}static #S(){return window.annexSearch.AnnexSearch.getRegistered()}static #T(){return this.#R().getView("root").getView("header.field")}static #U(){return this.#R().getView("root").getView("body.results.found")}static #V(n){if(!1===this.#M.documentCatchAll)return!1;let s=this.#R();if(null===s||!1===s.showing()||!0===n.metaKey||!0===n.ctrlKey)return!1;let r=n.key;if(r.length>1||" "===r)return!1;let i=s.shadow.activeElement,a=this.#T(),o=this.#U();return null===i?(a.focus(),a.clear(),a.nullifyLastTypesenseSearchResponse(),a.append(r),o.smoothScrollToTop(),o.resetFocusedIndex(),a.first("input").dispatchEvent(new Event("input",{bubbles:!0,shiftKey:n.shiftKey})),!0):!0!==i.matches("input")&&(a.focus(),a.clear(),a.nullifyLastTypesenseSearchResponse(),a.append(r),o.smoothScrollToTop(),o.resetFocusedIndex(),a.first("input").dispatchEvent(new Event("input",{bubbles:!0,shiftKey:n.shiftKey})),!0)}static #W(l){if(!1===this.#X(l,"documentDelete","backspace"))return!1;let h=this.#R().shadow.activeElement,c=this.#T(),u=this.#U();return null===h?(c.focus(),c.decrement(),c.nullifyLastTypesenseSearchResponse(),u.smoothScrollToTop(),u.resetFocusedIndex(),c.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0):!0!==h.matches("input")&&(c.focus(),c.decrement(),c.nullifyLastTypesenseSearchResponse(),u.smoothScrollToTop(),u.resetFocusedIndex(),c.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0)}static #Y(d){if(!1===this.#X(d,"documentEscape","escape"))return!1;let p=this.#R().shadow.activeElement;return null===p?(this.#T().focus(),!0):!0!==p.matches("input")&&(this.#T().focus(),!0)}static #Z(g){if(!1===this.#X(g,"documentKeyboardNavigation",["tab","arrowdown","arrowup"]))return!1;let f=g.key.toLowerCase();g.preventDefault();let S="previous";"arrowdown"===f&&(S="next"),"tab"===f&&!1===g.shiftKey&&(S="next");let m=this.#U();return"next"===S?(m.next(),!0):(m.previous()||this.#R().getView("root").focus(),!0)}static #$(x){if(!1===this.#M.documentKeyboardShortcut)return!1;let y=this.#S();for(let w of y){if("inline"===w.getConfig("layout"))continue;let $=w.getHelper("config").get("keyboardShortcut");if(null==$||"âŒ˜"!==($=$.trim().toLowerCase()).charAt(0))continue;let v=$.charAt(1),b=navigator.platform.toUpperCase().indexOf("MAC")>=0;if(b&&x.metaKey&&x.key.toLowerCase()===v||!b&&x.ctrlKey&&x.key.toLowerCase()===v)return x.preventDefault(),w.toggle(),!0}return!1}static #O(E){if(0===this.#S().length||null===this.#R())return!1;let T=this.#R();if(!1===T.showing()||!1===this.#M.documentPaste)return!1;let V=E.clipboardData.getData("text");if(0===V.length||0===(V=V.trim()).length)return!1;let R=T.shadow.activeElement,U=this.#T(),C=this.#U();return null===R?(U.focus(),U.clear(),U.nullifyLastTypesenseSearchResponse(),U.append(V),C.smoothScrollToTop(),C.resetFocusedIndex(),U.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0):!0!==R.matches("input")&&(U.focus(),U.clear(),U.nullifyLastTypesenseSearchResponse(),U.append(V),C.smoothScrollToTop(),C.resetFocusedIndex(),U.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0)}static #_(_){if(!1===this.#X(_,"documentSelectAll","a")||!1===_.metaKey)return!1;let L=this.#T();return L.focus(),L.select(),!0}static #aa(B){if(!1===this.#X(B,"documentSlash","/"))return!1;let H=this.#R().shadow.activeElement,A=this.#T();return null===H?(A.focus(),!0):!0!==H.matches("input")&&(A.focus(),!0)}static #ab(D){if(!1===this.#X(D,"fieldEnter","enter"))return!1;let F=this.#R().shadow.activeElement;if(null===F)return!1;if(!0===F.matches("input")){let q=this.#U();if(null===q.getFocusedIndex()){let M=q.getResults()[0];return void 0!==M&&(D.stopPropagation(),M.focus(),M.simulateClick(D),!0)}}return!1}static #ac(K){if(!1===this.#X(K,"fieldEscape","escape"))return!1;let I=this.#R(),k=I.shadow.activeElement;if(null===k)return!1;if(!0===k.matches("input")){K.preventDefault(),K.stopPropagation();let W=k.value.trim(),O=this.#U();if(""===W)return I.hide(),!0;let N=this.#T();return N.clear(),N.nullifyLastTypesenseSearchResponse(),O.clearResults(),O.setStateKey("idle"),I.dispatchCustomEvent("results.idle"),!0}return!1}static #Q(P){return 0!==this.#S().length&&(!0===this.#$(P)||!0===this.#Z(P)||!0===this.#Y(P)||!0===this.#ac(P)||!0===this.#ab(P)||!0===this.#aa(P)||!0===this.#_(P)||!0===this.#W(P)||(this.#V(P),!0))}static #X(j,Y,z){if(0===this.#S().length)return!1;let G=this.#R();if(null==G||!1===G.showing()||!1===this.#M[Y])return!1;z=[].concat(z);let X=j.key.toLowerCase();return!1!==z.includes(X)}static setup(){if(!0===super.setup())return this.#N(),this.#P(),!0;let e=window.annexSearch.KeyboardShortcutUtils.setup.bind(window.annexSearch.KeyboardShortcutUtils);return document.addEventListener("DOMContentLoaded",e),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.LoggingUtils=window.annexSearch.LoggingUtils||class extends window.annexSearch.BaseUtils{static #ad={error:"Annex Search"};static error(){let e="%c["+this.#ad.error+"]",t=Array.from(arguments);return t.unshift("color: red; font-weight: bold; font-family: monospace;"),t.unshift(e),window.console&&window.console.log&&window.console.log.apply(window,t),!0}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.StringUtils=window.annexSearch.StringUtils||class extends window.annexSearch.BaseUtils{static generateUUID(){let e="",t,n;for(t=0;t<36;t++)8===t||13===t||18===t||23===t?e+="-":14===t?e+="4":19===t?e+=(3&(n=16*Math.random()|0)|8).toString(16):e+=(n=16*Math.random()|0).toString(16);return e}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseUtils"],function(){window.annexSearch.ToastUtils=window.annexSearch.ToastUtils||class extends window.annexSearch.BaseUtils{static #ae=[];static all(){return this.#ae}static get(e){let t=[];for(let n of this.#ae)n.getWebComponent()===e&&t.push(n);return t}static remove(e){let t=this.#ae.indexOf(e);return -1!==t&&(this.#ae.splice(t,1),!0)}static #af(e){let t=e.shadow;return t.querySelector('[data-view-name="RootView"] > div.content')}static show(e,t){let n=this.#af(e),s=window.annexSearch.ElementUtils.renderTemplate("toast",n);return this.#ae.push(s),t.hideTimeoutDuration&&s.setHideTimeoutDuration(t.hideTimeoutDuration),t.message&&s.setMessage(t.message),t.title&&s.setTitle(t.title),s.show(),!0}static setup(){return!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.Base"],function(){window.annexSearch.BaseView=window.annexSearch.BaseView||class extends window.annexSearch.Base{_$element=null;constructor(e){super(),this._$element=e}_addEvents(){return!1}find(e){return Array.from(this._$element.querySelectorAll(e))}first(e){return this._$element.querySelector(e)}getElement(){return this._$element}removeAttribute(e){return this._$element.removeAttribute(e),!0}render(){return this._addEvents(),!0}setAttribute(e,t){return this._$element.setAttribute(e,t),!0}setView(e,t){let n=this.get("views");return void 0===n&&(n={}),n[e]=t,this.set("views",n),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.BodyView=window.annexSearch.BodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ag(){let e=window.annexSearch.ElementUtils.renderTemplate("errorBody",this._$element);return this.setView("error",e),!0}#ah(){let t=window.annexSearch.ElementUtils.renderTemplate("idleBody",this._$element);return this.setView("idle",t),!0}#ai(){let n=window.annexSearch.ElementUtils.renderTemplate("resultsBody",this._$element);return this.setView("results",n),!0}render(){return this.#ag(),this.#ah(),this.#ai(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ErrorBodyView=window.annexSearch.ErrorBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aj(){let e=this.getHelper("config").get("copy").error.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#aj(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.IdleBodyView=window.annexSearch.IdleBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aj(){let e=this.getHelper("config").get("copy").idle.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#aj(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.EmptyResultsBodyView=window.annexSearch.EmptyResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aj(){let e=this.getHelper("config").get("copy").empty.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#aj(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FoundResultsBodyView=window.annexSearch.FoundResultsBodyView||class extends window.annexSearch.BaseView{#ak=null;#al=[];#am=60;#an=.65;constructor(e){super(e)}#ao(){let e=this._$element,t=this.#ap.bind(this),n=this.#am,s=window.annexSearch.FunctionUtils.debounce(t,n);return e.addEventListener("scroll",s),!0}#aq(r){let i=window.annexSearch.ElementUtils.renderTemplate("resultFoundResultsBody",this._$element);return i.set("hit",r),this.#al.push(i),i.render(),!0}#ap(a){let o;return!(this._$element.scrollTop+this._$element.clientHeight<this._$element.scrollHeight*this.#an)&&(this.getView("root.header.field").loadMore(),!0)}_addEvents(){return this.#ao(),!0}clearResults(){for(this.#al=[];this._$element.firstChild;)this._$element.removeChild(this._$element.firstChild);return this.scrollToTop(),!0}containsScrollbar(){let e=this._$element;return e.scrollHeight>e.clientHeight}drawResults(e){let t=e.hits||[];if(0===t.length)return!1;for(var n of t)this.#aq(n);return!0}getFocusedIndex(){return this.#ak}getResults(){return this.#al}next(){if(0===this.#al.length)return!1;if(null===this.#ak)return this.#ak=0,this.#al[this.#ak].focus(),!0;return this.#ak!==this.#al.length-1&&(++this.#ak,this.#al[this.#ak].focus(),!0)}previous(){return 0!==this.#al.length&&null!==this.#ak&&(0===this.#ak?(this.#ak=null,!1):(--this.#ak,this.#al[this.#ak].focus(),!0))}resetFocusedIndex(){return this.setFocusedIndex(null)}setFocusedIndex(e){return this.#ak=e,!0}setFocusedIndexByResultView(e){let t=this.#al.indexOf(e);return this.setFocusedIndex(t),!0}scrollToTop(){let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.scrollTop=0}),!0}smoothScrollToTop(){let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.scrollTo({top:0,behavior:"smooth"})}),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ResultFoundResultsBodyView=window.annexSearch.ResultFoundResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ar(){let e=this._$element,t=this.#as.bind(this);return e.addEventListener("click",t),!0}#at(){let n=this._$element,s=this.#au.bind(this);return n.addEventListener("focus",s),!0}#as(r){let i=this.get("hit");return this.getWebComponent().dispatchCustomEvent("result.click",{event:r,hit:i}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}#au(a){let o=this.get("hit");return this.getWebComponent().dispatchCustomEvent("result.focus",{event:a,hit:o}),this.getView("root.body.results.found").setFocusedIndexByResultView(this),!0}#av(){let l=this._$element.outerHTML,h=this.get("hit");return l=window.annexSearch.ElementUtils.renderTemplateVariables(l,{hit:h}),l=this.getHelper("typesense").replaceHightlightTags(l),this._$element=this.#aw(l),!0}#aw(c){let u=document.createElement("template");u.innerHTML=c.trim();let d=u.content.firstChild,p=this._$element.data||{};return this._$element.replaceWith(d),d.data=p,d}#ax(){let g=this.getView("root.body.results.found").getResults().indexOf(this);return this.setAttribute("data-index",g),!0}_addEvents(){return this.#ar(),this.#at(),!0}focus(){return this._$element.focus(),this._$element.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),!0}render(){return void 0!==this.get("hit")&&(this.#av(),this.#ax(),super.render(),!0)}simulateClick(e){let t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,shiftKey:e.shiftKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey});return this._$element.dispatchEvent(t),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ResultsBodyView=window.annexSearch.ResultsBodyView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#ay(){let e=window.annexSearch.ElementUtils.renderTemplate("emptyResultsBody",this._$element);return this.setView("empty",e),!0}#az(){let t=window.annexSearch.ElementUtils.renderTemplate("foundResultsBody",this._$element);return this.setView("found",t),!0}render(){return this.#ay(),this.#az(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.ToastView=window.annexSearch.ToastView||class extends window.annexSearch.BaseView{#aA=5e3;#aB=null;#aC="(message)";#aD="(title)";constructor(e){super(e)}#ar(){let e=this._$element,t=this.#as.bind(this);return e.addEventListener("click",t),!0}#aE(){return this._$element.remove(),window.annexSearch.ToastUtils.remove(this),!0}#as(n){return this.hide(),!0}#aF(){let s=this.getWebComponent(),r=window.annexSearch.ToastUtils.get(s);for(let i of r)i!==this&&i.hide();return!0}#aG(){let a,o=setTimeout(this.hide.bind(this),this.#aA);return this.#aB=o,!0}_addEvents(){return null!==this.#aD&&(this.#ar(),!0)}hide(){this._$element.classList.remove("visible"),clearTimeout(this.#aB);var e=this.#aE.bind(this);return this._$element.addEventListener("transitionend",e),!0}setHideTimeoutDuration(e=null){return this.#aA=e||this.#aA,!0}setMessage(e){return this.first(".message").innerHTML=e,!0}setTitle(e){return this.first(".title").innerHTML=e,!0}show(){this.#aF(),this.#aG();let e=this._$element;return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.classList.add("visible")}),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.BrandingBarFooterView=window.annexSearch.BrandingBarFooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FooterView=window.annexSearch.FooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aH(){let e=window.annexSearch.ElementUtils.renderTemplate("brandingBarFooter",this._$element);return this.setView("brandingBar",e),!0}#aI(){let t=window.annexSearch.ElementUtils.renderTemplate("statusBarFooter",this._$element);return this.setView("statusBar",t),!0}render(){return this.#aH(),this.#aI(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.StatusBarFooterView=window.annexSearch.StatusBarFooterView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#aj(){let e=this.getHelper("config").get("copy").statusBar.message;return null!=e&&(e=e.trim(),this.first(".message").innerHTML=e,!0)}render(){return this.#aj(),super.render(),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.FieldHeaderView=window.annexSearch.FieldHeaderView||class extends window.annexSearch.BaseView{#aJ=null;#aK=!1;#aL=60;#aM=null;constructor(e){super(e)}#aN(){let e=this.#aO.bind(this);return this.first("input").addEventListener("input",e),!0}#aP(){let t=this.getHelper("config").get("keyboardShortcut");return null===t?null:t=t.trim().toLowerCase()}#aQ(n,s){let r=s.getError();if("abort"===r.key)return!1;this.getWebComponent().dispatchCustomEvent("results.error",{error:r});this.getView("root.header").hideSpinner();let i=s.getResponse();return this.#aJ=i,this.setStateKey("error"),s.logFailedEvent(),!0}#aO(a){let o=this.first("input").value.trim();return""===o?(this.nullifyLastTypesenseSearchResponse(),this.clear(),this.setStateKey("idle"),this.getWebComponent().dispatchCustomEvent("results.idle"),!1):o!==this.#aJ?.request_params?.q&&(this.nullifyLastTypesenseSearchResponse(),this.#aK=!1,this.getView("root.body.results.found").scrollToTop(),clearTimeout(this.#aM),this.#aM=setTimeout(this.#aR.bind(this),this.#aL),!0)}#aS(l,h){let c=h.getResponse();return this.getWebComponent().dispatchCustomEvent("results.loaded",{response:c}),this.#aJ=c,this.#aK=!1,0!==c.hits.length&&(this.getView("root.body.results.found").drawResults(c),this.#aT(),!0)}#aU(u,d){let p=d.getResponse();if(!0===this.#aK){let g=this.#aS(u,d);return!0===this.getView("root.body.results.found").containsScrollbar()||(this.loadMore(),g)}if(this.#aJ=p,this.getView("root.body.results.found").clearResults(),0===p.hits.length)return this.getWebComponent().dispatchCustomEvent("results.empty"),this.setStateKey("empty"),!1;this.getWebComponent().dispatchCustomEvent("results.loaded",{response:p}),this.setStateKey("results");let f=this.getView("root.body.results.found");return f.drawResults(p),f.resetFocusedIndex(),this.#aT(),!0===f.containsScrollbar()||(this.loadMore(),!0)}#aV(S={},m){if(null===m.getError())return this.getView("root.header").hideSpinner(),this.#aU(S,m);return this.#aQ(S,m)}#aR(x={}){this.getView("root.header").showSpinner();let y=this.first("input").value.trim(),w=this.#aV.bind(this,x);return this.getHelper("typesense").search(y,x).then(w)}#aW(){let $=this.getHelper("config").get("copy").placeholder;return null!=$&&(this.first("input").setAttribute("placeholder",$),!0)}#aX(){let v=this.#aP();return null!==v&&(this.first(".label").innerHTML=v.toUpperCase(),!0)}#aT(){let b=this.#aJ,E=this.getView("root.header.metaBar");return E.set("typesenseSearchResponse",b),E.render(),!0}_addEvents(){return this.#aN(),!0}append(e){let t=this.first("input");return t.value=t.value+e,!0}blur(){return this.first("input").blur(),!0}clear(){return this.first("input").value="",!0}nullifyLastTypesenseSearchResponse(){return this.#aJ=null,!0}decrement(){let e=this.first("input");return e.value=e.value.slice(0,-1),!0}focus(){let e=this.first("input");return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.focus()}),!0}loadMore(){if(!0===this.#aK)return!1;this.#aK=!0;if(this.getView("root.body.results.found").getResults().length>=this.#aJ.found)return!1;let e=this.#aJ?.page??null;if(null===e)return!1;e=parseInt(e,10),++e;let t={};return t.page=e,this.#aR(t),!0}render(){return super.render(),this.#aW(),this.#aX(),!0}select(){let e=this.first("input");return window.annexSearch.ElementUtils.waitForAnimation().then(function(){e.select()}),!0}setCaret(){let e=this.first("input"),t=e.value;return e.setSelectionRange(t.length,t.length),!0}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.HeaderView=window.annexSearch.HeaderView||class extends window.annexSearch.BaseView{#aY=!1;constructor(e){super(e)}#ar(){let e=this.#as.bind(this);return this._$element.addEventListener("click",e),!0}#aZ(){let t=this.#a$.bind(this);return this.first(".hide").addEventListener("click",t),!0}#a_(){let n=window.annexSearch.ElementUtils.renderTemplate("fieldHeader",this._$element);return this.setView("field",n),!0}#a0(){let s=window.annexSearch.ElementUtils.renderTemplate("metaBarHeader",this._$element);return this.setView("metaBar",s),!0}#as(r){let i;return r.target!==this.first(".hide")&&(this.focus(),!0)}#a$(a){return this.hideWebComponent(),!1}_addEvents(){return this.#ar(),this.#aZ(),!0}blur(){return this.getView("field").blur()}focus(){return this.getView("field").focus()}render(){return this.#a_(),this.#a0(),super.render(),!0}hideSpinner(){return!1!==this.#aY&&(this.#aY=!1,this.getView("root").setAttribute("data-searching","0"),!0)}showSpinner(){return!0!==this.#aY&&(this.#aY=!0,this.getView("root").setAttribute("data-searching","1"),!0)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.MetaBarHeaderView=window.annexSearch.MetaBarHeaderView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#a1(){let e=this.get("typesenseSearchResponse"),t=this.getView("root.body.results.found").getResults().length;return this.first(".showing").innerHTML=t,this.first(".found").innerHTML=e.found,!0}render(){return void 0!==this.get("typesenseSearchResponse")&&(this.#a1(),!0)}}}),window.annexSearch.DependencyLoader.push(["window.annexSearch.BaseView"],function(){window.annexSearch.RootView=window.annexSearch.RootView||class extends window.annexSearch.BaseView{constructor(e){super(e)}#a2(){let e=this._$element,t=this.#a3.bind(this);return e.addEventListener("click",t),!0}#a4(){let n=this.first(".content"),s=window.annexSearch.ElementUtils.renderTemplate("body",n);return this.setView("body",s),!0}#a5(){let r=this.first(".content"),i=window.annexSearch.ElementUtils.renderTemplate("footer",r);return this.setView("footer",i),!0}#a6(){let a=this.first(".content"),o=window.annexSearch.ElementUtils.renderTemplate("header",a);return this.setView("header",o),!0}#a3(l){return l.target===this._$element&&(this.getWebComponent().hide(),!0)}_addEvents(){return this.#a2(),!0}blur(){return this.getView("header").blur()}focus(){return this.getView("header").focus()}render(){return this.#a6(),this.#a4(),this.#a5(),super.render(),this.setStateKey("idle"),this.getWebComponent().dispatchCustomEvent("results.idle"),!0}setStateKey(e){return this._$element.setAttribute("data-state-key",e),!0}}}),window.annexSearch.DependencyLoader.push([],function(){window.annexSearch.AnnexSearchWidgetWebComponent=window.annexSearch.AnnexSearchWidgetWebComponent||class extends HTMLElement{#a7={};#a8=null;#a9=2147483647;#ba=!1;#bb=!1;#bc=null;#bd={};constructor(){super(),this.#a8=window.annexSearch.AnnexSearch.getRegistered().length,window.annexSearch.AnnexSearch.register(this),this.#be(),this.#bf(),this.#bg(),this.#bh()}#bi(){return this.#a9,this.#a8,!0}#bj(){let e=this.shadow,t=window.annexSearch.ElementUtils.renderTemplate("root",e,this),n=this.getConfig("layout"),s=String(+this.getConfig("showOverlay")),r=this.#a8;if("inline"===this.getConfig("layout")&&(s=0),this.#bd.root=t,this.setAttribute("id",this.#bc),this.setAttribute("data-annex-search-layout",n),this.setAttribute("data-annex-search-overlay",s),this.setAttribute("data-annex-search-ready","1"),this.setAttribute("data-annex-search-index",r),this.setAttribute("data-annex-search-open","0"),null!==this.getConfig("name")){let i=this.getConfig("name");this.setAttribute("data-annex-search-name",i)}return"inline"===this.getConfig("layout")&&this.show(),!0}#bh(){let a=this.getHelper("config"),o=this.#bj.bind(this);return a.loadStylesheets(this).then(a.loadTemplates.bind(a)).then(o).catch(function(e){console.log(e)})}#bf(){return this.#a7.config=new window.annexSearch.ConfigHelper,this.#a7.typesense=new window.annexSearch.TypesenseHelper,!0}#be(){return this.shadow=this.attachShadow({mode:"closed"}),!0}#bg(){return this.#bc=window.annexSearch.StringUtils.generateUUID(),!0}clear(){let e=this.getView("root").getView("root.header.field"),t=this.getView("root").getView("body.results.found");return e.focus(),e.clear(),e.nullifyLastTypesenseSearchResponse(),t.resetFocusedIndex(),e.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0}dispatchCustomEvent(e,t={}){t.$annexSearchWidget=this;let n=new CustomEvent(e,{detail:t}),s=this.getConfig("callbacks")||{},r=e.split(".");for(var i of r)if(null===(s=s[i]??null))break;return s&&s&&s.apply(this,[n]),this.dispatchEvent(n),!0}focus(){return this.getView("root").focus()}getConfig(e){return this.getHelper("config").get(e)}getHelper(e){return this.#a7[e]}getView(e){return this.#bd[e]}hide(){return"inline"!==this.getConfig("layout")&&!1!==this.#bb&&(window.annexSearch.AnnexSearch.clearActive(),this.dispatchCustomEvent("root.hide"),this.#bb=!1,this.#bd.root.blur(),this.setAttribute("data-annex-search-open","0"),this.setAttribute("inert",""),!0)}mount(e=null){if(null===(e=e||this.getConfig("$container")||null)){if("inline"===this.getConfig("layout"))return!1;e=document.body||document.head||document.documentElement}return e.appendChild(this),this.#ba=!0,!0}query(e){let t=this.getView("root").getView("root.header.field"),n=this.getView("root").getView("body.results.found");return t.focus(),t.clear(),t.nullifyLastTypesenseSearchResponse(),t.append(e),n.smoothScrollToTop(),n.resetFocusedIndex(),window.annexSearch.ElementUtils.waitForAnimation().then(function(){t.setCaret()}),t.first("input").dispatchEvent(new Event("input",{bubbles:!0})),!0}ready(){if(!1===this.#ba)return new Promise(function(e,t){t()});let e=this;return null===this.getAttribute("data-annex-search-ready")?new Promise(function(t,n){let s=setInterval(function(){null!==e.getAttribute("data-annex-search-ready")&&(clearInterval(s),t(e))},10)}):new Promise(function(e,t){e()})}setConfig(e,t){return"object"==typeof e?this.getHelper("config").setData(e):this.getHelper("config").set(e,t)}show(){if(!0===this.#bb)return!1;window.annexSearch.AnnexSearch.setActive(this),this.dispatchCustomEvent("root.show"),this.#bb=!0,this.#bi(),this.setAttribute("data-annex-search-open","1"),this.removeAttribute("inert");let e=this.#bd.root.getView("root.body.results.found"),t=e.getResults();if(0===t.length)return this.#bd.root.focus(),!0;let n=e.getFocusedIndex();null===n&&(n=0);let s=t[n];return void 0===s||(s.focus(),!0)}showing(){return this.#bb}showToast(e,t,n=null){return window.annexSearch.ToastUtils.show(this,{title:e,message:t,hideTimeoutDuration:n})}toggle(){return(this.dispatchCustomEvent("root.toggle"),!0===this.#bb)?this.hide():this.show()}}}),window.annexSearch.DependencyLoader.load(function(){window.annexSearch.AnnexSearch.setup()});